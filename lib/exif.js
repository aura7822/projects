const a4_0x187042=a4_0xe3a3;(function(_0x34e84e,_0x220010){const _0x6b1c67=a4_0xe3a3,_0x2f1ebd=_0x34e84e();while(!![]){try{const _0x6c10f1=parseInt(_0x6b1c67(0x13e))/0x1+parseInt(_0x6b1c67(0x17a))/0x2+parseInt(_0x6b1c67(0x17b))/0x3*(-parseInt(_0x6b1c67(0x159))/0x4)+-parseInt(_0x6b1c67(0x13f))/0x5*(-parseInt(_0x6b1c67(0x18e))/0x6)+parseInt(_0x6b1c67(0x14c))/0x7+-parseInt(_0x6b1c67(0x15e))/0x8+-parseInt(_0x6b1c67(0x140))/0x9;if(_0x6c10f1===_0x220010)break;else _0x2f1ebd['push'](_0x2f1ebd['shift']());}catch(_0x121503){_0x2f1ebd['push'](_0x2f1ebd['shift']());}}}(a4_0x1453,0x743c5));function a4_0xe3a3(_0x42ec32,_0x4df57b){const _0x53362b=a4_0x1453();return a4_0xe3a3=function(_0x10bcd3,_0x634680){_0x10bcd3=_0x10bcd3-0x13c;let _0x145315=_0x53362b[_0x10bcd3];return _0x145315;},a4_0xe3a3(_0x42ec32,_0x4df57b);}const a4_0x634680=(function(){const _0x241fe7=a4_0xe3a3,_0x974bce={'vgOEu':function(_0xf6b8a,_0x246ce5){return _0xf6b8a===_0x246ce5;},'unSmg':_0x241fe7(0x141)};let _0xe1fd07=!![];return function(_0x1d38ea,_0x5d2a5e){const _0x7a6a80=_0x241fe7;if(_0x974bce['vgOEu'](_0x974bce[_0x7a6a80(0x13c)],_0x974bce[_0x7a6a80(0x13c)])){const _0x5c0fc0=_0xe1fd07?function(){const _0x4211c3=_0x7a6a80;if(_0x5d2a5e){const _0x4d5de4=_0x5d2a5e[_0x4211c3(0x13d)](_0x1d38ea,arguments);return _0x5d2a5e=null,_0x4d5de4;}}:function(){};return _0xe1fd07=![],_0x5c0fc0;}else{if(_0x22f304){const _0x588793=_0x338616[_0x7a6a80(0x13d)](_0x37072b,arguments);return _0x42c479=null,_0x588793;}}};}()),a4_0x10bcd3=a4_0x634680(this,function(){const _0x4aba30=a4_0xe3a3,_0x304127={'yCiNW':_0x4aba30(0x182)};return a4_0x10bcd3[_0x4aba30(0x146)]()['search'](_0x304127[_0x4aba30(0x16e)])[_0x4aba30(0x146)]()['constructor'](a4_0x10bcd3)[_0x4aba30(0x161)](_0x304127[_0x4aba30(0x16e)]);});a4_0x10bcd3();const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(a4_0x187042(0x174)),ff=require(a4_0x187042(0x188)),webp=require('node-webpmux'),path=require(a4_0x187042(0x149));async function imageToWebp(_0x15d43a){const _0x2cc299=a4_0x187042,_0x1b6e8a={'voqwr':function(_0x2f4f82,_0x4b0055){return _0x2f4f82(_0x4b0055);},'JqpgA':_0x2cc299(0x14f),'lqHPj':'end','GpZPR':'-vcodec','MXDNj':_0x2cc299(0x189),'aGFfQ':_0x2cc299(0x147),'TlmEo':_0x2cc299(0x15f),'ZETXF':function(_0x4e9763){return _0x4e9763();},'xpmyF':function(_0x7412dc){return _0x7412dc();}},_0x5ada80=path[_0x2cc299(0x165)](_0x1b6e8a[_0x2cc299(0x157)](tmpdir),Crypto[_0x2cc299(0x148)](0x6)[_0x2cc299(0x17c)](0x0,0x6)[_0x2cc299(0x146)](0x24)+_0x2cc299(0x14a)),_0xc704be=path[_0x2cc299(0x165)](_0x1b6e8a[_0x2cc299(0x160)](tmpdir),Crypto[_0x2cc299(0x148)](0x6)[_0x2cc299(0x17c)](0x0,0x6)['toString'](0x24)+_0x2cc299(0x15d));fs[_0x2cc299(0x195)](_0xc704be,_0x15d43a),await new Promise((_0x208633,_0x561960)=>{const _0x22e80d=_0x2cc299;_0x1b6e8a[_0x22e80d(0x184)](ff,_0xc704be)['on'](_0x1b6e8a[_0x22e80d(0x18b)],_0x561960)['on'](_0x1b6e8a[_0x22e80d(0x18d)],()=>_0x208633(!![]))['addOutputOptions']([_0x1b6e8a[_0x22e80d(0x154)],_0x1b6e8a[_0x22e80d(0x187)],_0x22e80d(0x166),_0x1b6e8a['aGFfQ']])[_0x22e80d(0x18f)](_0x1b6e8a['TlmEo'])['save'](_0x5ada80);});const _0x277568=fs[_0x2cc299(0x16c)](_0x5ada80);return fs[_0x2cc299(0x172)](_0x5ada80),fs[_0x2cc299(0x172)](_0xc704be),_0x277568;}async function videoToWebp(_0x2d6a0e){const _0x3eefee=a4_0x187042,_0x338947={'lfLSC':function(_0x24ab3e,_0x28501f){return _0x24ab3e(_0x28501f);},'pROvs':_0x3eefee(0x14f),'nHyNH':_0x3eefee(0x191),'jGXex':_0x3eefee(0x186),'JYLFw':_0x3eefee(0x189),'DdwiE':_0x3eefee(0x176),'skQdW':_0x3eefee(0x15b),'uIVAq':'00:00:00','OYgbb':'-preset','TZOMb':_0x3eefee(0x143),'eEtzJ':_0x3eefee(0x152),'WXWdk':_0x3eefee(0x18c),'TBbqI':'webp','hRADM':function(_0x3456df){return _0x3456df();}},_0x2cb91b=path[_0x3eefee(0x165)](_0x338947[_0x3eefee(0x171)](tmpdir),Crypto[_0x3eefee(0x148)](0x6)['readUIntLE'](0x0,0x6)[_0x3eefee(0x146)](0x24)+_0x3eefee(0x14a)),_0x5407a1=path[_0x3eefee(0x165)](_0x338947['hRADM'](tmpdir),Crypto[_0x3eefee(0x148)](0x6)[_0x3eefee(0x17c)](0x0,0x6)[_0x3eefee(0x146)](0x24)+'.mp4');fs[_0x3eefee(0x195)](_0x5407a1,_0x2d6a0e),await new Promise((_0x216357,_0x38a2b7)=>{const _0x18e86e=_0x3eefee;_0x338947[_0x18e86e(0x158)](ff,_0x5407a1)['on'](_0x338947[_0x18e86e(0x167)],_0x38a2b7)['on'](_0x338947[_0x18e86e(0x151)],()=>_0x216357(!![]))[_0x18e86e(0x180)]([_0x338947[_0x18e86e(0x169)],_0x338947[_0x18e86e(0x16a)],_0x18e86e(0x166),_0x18e86e(0x147),_0x338947['DdwiE'],'0',_0x338947[_0x18e86e(0x17e)],_0x338947[_0x18e86e(0x16b)],'-t',_0x18e86e(0x192),_0x338947[_0x18e86e(0x177)],_0x338947[_0x18e86e(0x150)],_0x338947['eEtzJ'],_0x338947['WXWdk'],'0'])[_0x18e86e(0x18f)](_0x338947['TBbqI'])[_0x18e86e(0x178)](_0x2cb91b);});const _0x344c36=fs[_0x3eefee(0x16c)](_0x2cb91b);return fs[_0x3eefee(0x172)](_0x2cb91b),fs[_0x3eefee(0x172)](_0x5407a1),_0x344c36;}async function writeExifImg(_0xe7e492,_0x2b446d){const _0x41b955=a4_0x187042,_0x40ffc2={'yoTYa':_0x41b955(0x182),'JqouW':function(_0x247773,_0x1dbe79){return _0x247773(_0x1dbe79);},'AqnyC':function(_0x53b978){return _0x53b978();},'GCoOJ':function(_0x338159,_0x2beb2f){return _0x338159===_0x2beb2f;},'HfEmD':_0x41b955(0x170),'lRNGU':'pMPKs','xMNqi':_0x41b955(0x168)};let _0x38cca5=await _0x40ffc2[_0x41b955(0x17d)](imageToWebp,_0xe7e492);const _0x298421=path[_0x41b955(0x165)](_0x40ffc2['AqnyC'](tmpdir),Crypto[_0x41b955(0x148)](0x6)[_0x41b955(0x17c)](0x0,0x6)['toString'](0x24)+_0x41b955(0x14a)),_0xf9e61d=path[_0x41b955(0x165)](tmpdir(),Crypto[_0x41b955(0x148)](0x6)[_0x41b955(0x17c)](0x0,0x6)['toString'](0x24)+_0x41b955(0x14a));fs[_0x41b955(0x195)](_0x298421,_0x38cca5);if(_0x2b446d['packname']||_0x2b446d[_0x41b955(0x162)]){if(_0x40ffc2[_0x41b955(0x175)](_0x40ffc2['HfEmD'],_0x40ffc2[_0x41b955(0x173)]))return _0x22babb[_0x41b955(0x146)]()[_0x41b955(0x161)](_0x41b955(0x182))['toString']()[_0x41b955(0x185)](_0x45df7a)['search'](QxqFwV[_0x41b955(0x194)]);else{const _0x8fb05e=new webp[(_0x41b955(0x155))](),_0x87d020={'sticker-pack-id':_0x41b955(0x16d),'sticker-pack-name':_0x2b446d[_0x41b955(0x17f)],'sticker-pack-publisher':_0x2b446d[_0x41b955(0x162)],'emojis':_0x2b446d[_0x41b955(0x144)]?_0x2b446d[_0x41b955(0x144)]:['']},_0xcecdd9=Buffer[_0x41b955(0x14b)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x21332d=Buffer['from'](JSON[_0x41b955(0x15c)](_0x87d020),_0x40ffc2[_0x41b955(0x14e)]),_0xf4051c=Buffer[_0x41b955(0x164)]([_0xcecdd9,_0x21332d]);return _0xf4051c[_0x41b955(0x163)](_0x21332d[_0x41b955(0x193)],0xe,0x4),await _0x8fb05e['load'](_0x298421),fs[_0x41b955(0x172)](_0x298421),_0x8fb05e[_0x41b955(0x156)]=_0xf4051c,await _0x8fb05e[_0x41b955(0x178)](_0xf9e61d),_0xf9e61d;}}}function a4_0x1453(){const _0x3bfee6=['libwebp','RoOSZ','JqpgA','-vsync','lqHPj','3119196rwYiVg','toFormat','dwzgk','end','00:00:05','length','yoTYa','writeFileSync','unSmg','apply','409932WcXZLX','5rSvrhU','5240979qqhtLt','ElHlG','data','default','categories','mimetype','toString','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','randomBytes','path','.webp','from','2994509DzxvuR','VZfVd','xMNqi','error','TZOMb','nHyNH','-an','test','GpZPR','Image','exif','ZETXF','lfLSC','1136SBxOii','Vghjp','-ss','stringify','.jpg','2591024GOCQdi','webp','xpmyF','search','author','writeUIntLE','concat','join','-vf','pROvs','utf-8','jGXex','JYLFw','uIVAq','readFileSync','https://github.com/mruniquehacker/Knightbot','yCiNW','load','NRJOp','hRADM','unlinkSync','lRNGU','crypto','GCoOJ','-loop','OYgbb','save','xIfpF','1113314gQTRog','5619LZMVKb','readUIntLE','JqouW','skQdW','packname','addOutputOptions','LpHYM','(((.+)+)+)+$','YBaaH','voqwr','constructor','-vcodec','MXDNj','fluent-ffmpeg'];a4_0x1453=function(){return _0x3bfee6;};return a4_0x1453();}async function writeExifVid(_0x2d6326,_0x53c4fd){const _0x348c1b=a4_0x187042,_0x315ed1={'LpHYM':function(_0x4217ed){return _0x4217ed();},'Vghjp':function(_0x29a6a3){return _0x29a6a3();},'dwzgk':'utf-8'};let _0x1ec2df=await videoToWebp(_0x2d6326);const _0x34bfd6=path[_0x348c1b(0x165)](_0x315ed1[_0x348c1b(0x181)](tmpdir),Crypto['randomBytes'](0x6)[_0x348c1b(0x17c)](0x0,0x6)['toString'](0x24)+_0x348c1b(0x14a)),_0xec42d7=path[_0x348c1b(0x165)](_0x315ed1[_0x348c1b(0x15a)](tmpdir),Crypto[_0x348c1b(0x148)](0x6)['readUIntLE'](0x0,0x6)[_0x348c1b(0x146)](0x24)+'.webp');fs['writeFileSync'](_0x34bfd6,_0x1ec2df);if(_0x53c4fd[_0x348c1b(0x17f)]||_0x53c4fd[_0x348c1b(0x162)]){const _0x2ac352=new webp['Image'](),_0x31f4b8={'sticker-pack-id':_0x348c1b(0x16d),'sticker-pack-name':_0x53c4fd[_0x348c1b(0x17f)],'sticker-pack-publisher':_0x53c4fd[_0x348c1b(0x162)],'emojis':_0x53c4fd['categories']?_0x53c4fd[_0x348c1b(0x144)]:['']},_0x45696b=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x101484=Buffer[_0x348c1b(0x14b)](JSON['stringify'](_0x31f4b8),_0x315ed1[_0x348c1b(0x190)]),_0x59020d=Buffer[_0x348c1b(0x164)]([_0x45696b,_0x101484]);return _0x59020d[_0x348c1b(0x163)](_0x101484[_0x348c1b(0x193)],0xe,0x4),await _0x2ac352['load'](_0x34bfd6),fs[_0x348c1b(0x172)](_0x34bfd6),_0x2ac352['exif']=_0x59020d,await _0x2ac352[_0x348c1b(0x178)](_0xec42d7),_0xec42d7;}}async function writeExif(_0x228018,_0x4fe6a6){const _0xf2be6d=a4_0x187042,_0x11166c={'xIfpF':function(_0x3ba9d1,_0x511183){return _0x3ba9d1(_0x511183);},'VZfVd':function(_0x2c7411,_0x14b444){return _0x2c7411(_0x14b444);},'YBaaH':function(_0x508b42){return _0x508b42();},'RoOSZ':_0xf2be6d(0x168)};let _0x1a27d7=/webp/['test'](_0x228018[_0xf2be6d(0x145)])?_0x228018[_0xf2be6d(0x142)]:/image/[_0xf2be6d(0x153)](_0x228018[_0xf2be6d(0x145)])?await _0x11166c[_0xf2be6d(0x179)](imageToWebp,_0x228018[_0xf2be6d(0x142)]):/video/[_0xf2be6d(0x153)](_0x228018[_0xf2be6d(0x145)])?await _0x11166c[_0xf2be6d(0x14d)](videoToWebp,_0x228018[_0xf2be6d(0x142)]):'';const _0x544671=path[_0xf2be6d(0x165)](_0x11166c[_0xf2be6d(0x183)](tmpdir),Crypto[_0xf2be6d(0x148)](0x6)[_0xf2be6d(0x17c)](0x0,0x6)[_0xf2be6d(0x146)](0x24)+'.webp'),_0x23924d=path[_0xf2be6d(0x165)](_0x11166c['YBaaH'](tmpdir),Crypto[_0xf2be6d(0x148)](0x6)[_0xf2be6d(0x17c)](0x0,0x6)[_0xf2be6d(0x146)](0x24)+_0xf2be6d(0x14a));fs['writeFileSync'](_0x544671,_0x1a27d7);if(_0x4fe6a6[_0xf2be6d(0x17f)]||_0x4fe6a6['author']){const _0x5542e0=new webp[(_0xf2be6d(0x155))](),_0x381a43={'sticker-pack-id':_0xf2be6d(0x16d),'sticker-pack-name':_0x4fe6a6['packname'],'sticker-pack-publisher':_0x4fe6a6[_0xf2be6d(0x162)],'emojis':_0x4fe6a6[_0xf2be6d(0x144)]?_0x4fe6a6[_0xf2be6d(0x144)]:['']},_0x19e11c=Buffer[_0xf2be6d(0x14b)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x23e806=Buffer[_0xf2be6d(0x14b)](JSON[_0xf2be6d(0x15c)](_0x381a43),_0x11166c[_0xf2be6d(0x18a)]),_0x14b075=Buffer[_0xf2be6d(0x164)]([_0x19e11c,_0x23e806]);return _0x14b075['writeUIntLE'](_0x23e806[_0xf2be6d(0x193)],0xe,0x4),await _0x5542e0[_0xf2be6d(0x16f)](_0x544671),fs[_0xf2be6d(0x172)](_0x544671),_0x5542e0[_0xf2be6d(0x156)]=_0x14b075,await _0x5542e0[_0xf2be6d(0x178)](_0x23924d),_0x23924d;}}module['exports']={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};