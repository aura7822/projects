const a4_0x4f181e=a4_0x5cbe;(function(_0x564d85,_0x16656c){const _0x32b69a=a4_0x5cbe,_0x19e393=_0x564d85();while(!![]){try{const _0xe1d6fe=parseInt(_0x32b69a(0x98))/0x1+parseInt(_0x32b69a(0x96))/0x2*(-parseInt(_0x32b69a(0xd4))/0x3)+-parseInt(_0x32b69a(0x94))/0x4+parseInt(_0x32b69a(0x9a))/0x5*(parseInt(_0x32b69a(0xea))/0x6)+parseInt(_0x32b69a(0xb4))/0x7+-parseInt(_0x32b69a(0xa3))/0x8*(-parseInt(_0x32b69a(0xba))/0x9)+-parseInt(_0x32b69a(0xe6))/0xa;if(_0xe1d6fe===_0x16656c)break;else _0x19e393['push'](_0x19e393['shift']());}catch(_0x3b9f8e){_0x19e393['push'](_0x19e393['shift']());}}}(a4_0x31a1,0x4fd71));const a4_0x2dece4=(function(){let _0x7e240e=!![];return function(_0x38505c,_0x5ad196){const _0x579f77=_0x7e240e?function(){const _0x523196=a4_0x5cbe;if(_0x5ad196){const _0xf65448=_0x5ad196[_0x523196(0xc5)](_0x38505c,arguments);return _0x5ad196=null,_0xf65448;}}:function(){};return _0x7e240e=![],_0x579f77;};}()),a4_0x435a81=a4_0x2dece4(this,function(){const _0x163411=a4_0x5cbe,_0x3bc499={'PcglM':_0x163411(0xcd)};return a4_0x435a81[_0x163411(0xa4)]()[_0x163411(0xe4)]('(((.+)+)+)+$')[_0x163411(0xa4)]()['constructor'](a4_0x435a81)['search'](_0x3bc499[_0x163411(0xa9)]);});a4_0x435a81();const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(a4_0x4f181e(0xbd)),ff=require('fluent-ffmpeg'),webp=require(a4_0x4f181e(0xae)),path=require(a4_0x4f181e(0xc2));async function imageToWebp(_0xb15948){const _0x5dca71=a4_0x4f181e,_0x480773={'BDZvO':_0x5dca71(0xcf),'TbGWl':_0x5dca71(0xd6),'QgTrv':'-vf','NJrSb':_0x5dca71(0xcc),'jrGtj':_0x5dca71(0xc7),'UOwCB':_0x5dca71(0xda),'UUwKi':_0x5dca71(0xe5),'XzhnH':_0x5dca71(0xe8),'OHmhQ':_0x5dca71(0xdc),'IJdoR':'webp','rwhfu':function(_0x29278a,_0x58e711){return _0x29278a!==_0x58e711;},'nEsKu':'zoUKd','pCioY':_0x5dca71(0xc1),'aWLYh':'libwebp','Gqdjm':function(_0x34fd26){return _0x34fd26();}},_0x4b571d=path['join'](_0x480773[_0x5dca71(0xaa)](tmpdir),Crypto[_0x5dca71(0xb5)](0x6)[_0x5dca71(0xc4)](0x0,0x6)[_0x5dca71(0xa4)](0x24)+_0x5dca71(0x9d)),_0x1cd6bb=path['join'](tmpdir(),Crypto[_0x5dca71(0xb5)](0x6)[_0x5dca71(0xc4)](0x0,0x6)[_0x5dca71(0xa4)](0x24)+_0x5dca71(0xb9));fs[_0x5dca71(0xa0)](_0x1cd6bb,_0xb15948),await new Promise((_0x53f1d5,_0x26978e)=>{const _0x31d535=_0x5dca71;_0x480773[_0x31d535(0xe0)](_0x480773['nEsKu'],_0x480773[_0x31d535(0xe1)])?_0xa0dbdb(_0x3a3c64)['on'](_0x31d535(0xc1),_0x46be83)['on'](_0x480773[_0x31d535(0xce)],()=>_0x6f1b04(!![]))[_0x31d535(0xe7)]([_0x480773[_0x31d535(0xcb)],_0x31d535(0xd2),_0x480773[_0x31d535(0xa8)],_0x480773[_0x31d535(0xab)],_0x480773['jrGtj'],'0',_0x480773['UOwCB'],_0x480773[_0x31d535(0xdb)],'-t',_0x480773[_0x31d535(0xc3)],_0x31d535(0x9f),_0x31d535(0x9e),_0x480773[_0x31d535(0xd3)],_0x31d535(0xb7),'0'])[_0x31d535(0xd1)](_0x480773[_0x31d535(0xc6)])['save'](_0x4502db):ff(_0x1cd6bb)['on'](_0x480773[_0x31d535(0xa7)],_0x26978e)['on'](_0x480773[_0x31d535(0xce)],()=>_0x53f1d5(!![]))[_0x31d535(0xe7)]([_0x480773[_0x31d535(0xcb)],_0x480773[_0x31d535(0xde)],_0x480773[_0x31d535(0xa8)],_0x31d535(0xcc)])[_0x31d535(0xd1)](_0x480773[_0x31d535(0xc6)])['save'](_0x4b571d);});const _0x48c62c=fs[_0x5dca71(0xb0)](_0x4b571d);return fs[_0x5dca71(0xeb)](_0x4b571d),fs[_0x5dca71(0xeb)](_0x1cd6bb),_0x48c62c;}async function videoToWebp(_0x4dd9ac){const _0x15d104=a4_0x4f181e,_0x4808a7={'ZIGRT':function(_0xb3ca67,_0x1b21e0){return _0xb3ca67(_0x1b21e0);},'LFnuE':_0x15d104(0xcf),'cIfBd':_0x15d104(0xd2),'GAZOd':_0x15d104(0xbc),'INlpw':'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','IpLqp':_0x15d104(0xc7),'BezWn':'-ss','SFGTX':'00:00:00','uYpYI':_0x15d104(0xe8),'LjYoG':_0x15d104(0x9e),'MyiTp':'-vsync','YbDcj':'webp','FtlZe':function(_0x409cc7){return _0x409cc7();},'ZRdGQ':function(_0x278d5e){return _0x278d5e();}},_0x27e9f5=path[_0x15d104(0xa2)](_0x4808a7['FtlZe'](tmpdir),Crypto[_0x15d104(0xb5)](0x6)[_0x15d104(0xc4)](0x0,0x6)['toString'](0x24)+_0x15d104(0x9d)),_0xd9a990=path[_0x15d104(0xa2)](_0x4808a7[_0x15d104(0xe9)](tmpdir),Crypto[_0x15d104(0xb5)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x15d104(0x9c));fs[_0x15d104(0xa0)](_0xd9a990,_0x4dd9ac),await new Promise((_0x17acef,_0x46b0e3)=>{const _0x1c3cfe=_0x15d104;_0x4808a7['ZIGRT'](ff,_0xd9a990)['on'](_0x1c3cfe(0xc1),_0x46b0e3)['on'](_0x4808a7[_0x1c3cfe(0x9b)],()=>_0x17acef(!![]))[_0x1c3cfe(0xe7)]([_0x1c3cfe(0xd6),_0x4808a7[_0x1c3cfe(0xd5)],_0x4808a7[_0x1c3cfe(0xb1)],_0x4808a7[_0x1c3cfe(0xbe)],_0x4808a7[_0x1c3cfe(0xe3)],'0',_0x4808a7[_0x1c3cfe(0xd0)],_0x4808a7['SFGTX'],'-t',_0x4808a7[_0x1c3cfe(0x95)],_0x1c3cfe(0x9f),_0x4808a7[_0x1c3cfe(0xb6)],_0x1c3cfe(0xdc),_0x4808a7[_0x1c3cfe(0xb3)],'0'])[_0x1c3cfe(0xd1)](_0x4808a7[_0x1c3cfe(0xad)])[_0x1c3cfe(0xdf)](_0x27e9f5);});const _0x2978a9=fs['readFileSync'](_0x27e9f5);return fs[_0x15d104(0xeb)](_0x27e9f5),fs['unlinkSync'](_0xd9a990),_0x2978a9;}async function writeExifImg(_0x1ea49e,_0x541009){const _0x23ca62=a4_0x4f181e,_0x8fc822={'nitXI':function(_0x48258f,_0x2d434b){return _0x48258f(_0x2d434b);},'mokAJ':function(_0x1721be){return _0x1721be();},'LKrgn':_0x23ca62(0xd8)};let _0x3cb6d3=await _0x8fc822[_0x23ca62(0xca)](imageToWebp,_0x1ea49e);const _0x55634b=path['join'](_0x8fc822[_0x23ca62(0xa1)](tmpdir),Crypto[_0x23ca62(0xb5)](0x6)[_0x23ca62(0xc4)](0x0,0x6)[_0x23ca62(0xa4)](0x24)+_0x23ca62(0x9d)),_0x3d49bf=path[_0x23ca62(0xa2)](tmpdir(),Crypto[_0x23ca62(0xb5)](0x6)[_0x23ca62(0xc4)](0x0,0x6)[_0x23ca62(0xa4)](0x24)+'.webp');fs['writeFileSync'](_0x55634b,_0x3cb6d3);if(_0x541009['packname']||_0x541009[_0x23ca62(0xb2)]){const _0x502d55=new webp[(_0x23ca62(0xc0))](),_0x5a3b9b={'sticker-pack-id':_0x23ca62(0x99),'sticker-pack-name':_0x541009[_0x23ca62(0xe2)],'sticker-pack-publisher':_0x541009[_0x23ca62(0xb2)],'emojis':_0x541009['categories']?_0x541009[_0x23ca62(0xbb)]:['']},_0x11183e=Buffer[_0x23ca62(0x97)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x2069fa=Buffer['from'](JSON[_0x23ca62(0xdd)](_0x5a3b9b),_0x8fc822['LKrgn']),_0x3f176a=Buffer[_0x23ca62(0xd9)]([_0x11183e,_0x2069fa]);return _0x3f176a[_0x23ca62(0xc8)](_0x2069fa[_0x23ca62(0xb8)],0xe,0x4),await _0x502d55['load'](_0x55634b),fs['unlinkSync'](_0x55634b),_0x502d55[_0x23ca62(0xa6)]=_0x3f176a,await _0x502d55[_0x23ca62(0xdf)](_0x3d49bf),_0x3d49bf;}}function a4_0x5cbe(_0x4f06c5,_0x335fa8){const _0x5d0466=a4_0x31a1();return a4_0x5cbe=function(_0x435a81,_0x2dece4){_0x435a81=_0x435a81-0x93;let _0x31a112=_0x5d0466[_0x435a81];return _0x31a112;},a4_0x5cbe(_0x4f06c5,_0x335fa8);}async function writeExifVid(_0x31fe9b,_0x14cb90){const _0x4f690b=a4_0x4f181e,_0x4d0215={'AnWgY':function(_0x10803d){return _0x10803d();},'jlnQU':function(_0xe1fba5){return _0xe1fba5();},'sidmx':_0x4f690b(0xd8)};let _0x2dac84=await videoToWebp(_0x31fe9b);const _0x2d007d=path[_0x4f690b(0xa2)](_0x4d0215['AnWgY'](tmpdir),Crypto[_0x4f690b(0xb5)](0x6)[_0x4f690b(0xc4)](0x0,0x6)[_0x4f690b(0xa4)](0x24)+_0x4f690b(0x9d)),_0x156eff=path[_0x4f690b(0xa2)](_0x4d0215['jlnQU'](tmpdir),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x4f690b(0xa4)](0x24)+_0x4f690b(0x9d));fs[_0x4f690b(0xa0)](_0x2d007d,_0x2dac84);if(_0x14cb90[_0x4f690b(0xe2)]||_0x14cb90[_0x4f690b(0xb2)]){const _0x35f470=new webp[(_0x4f690b(0xc0))](),_0x29261d={'sticker-pack-id':_0x4f690b(0x99),'sticker-pack-name':_0x14cb90[_0x4f690b(0xe2)],'sticker-pack-publisher':_0x14cb90[_0x4f690b(0xb2)],'emojis':_0x14cb90['categories']?_0x14cb90[_0x4f690b(0xbb)]:['']},_0x3e8df3=Buffer[_0x4f690b(0x97)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1489b0=Buffer['from'](JSON[_0x4f690b(0xdd)](_0x29261d),_0x4d0215['sidmx']),_0x7b243c=Buffer[_0x4f690b(0xd9)]([_0x3e8df3,_0x1489b0]);return _0x7b243c[_0x4f690b(0xc8)](_0x1489b0['length'],0xe,0x4),await _0x35f470['load'](_0x2d007d),fs[_0x4f690b(0xeb)](_0x2d007d),_0x35f470['exif']=_0x7b243c,await _0x35f470[_0x4f690b(0xdf)](_0x156eff),_0x156eff;}}async function writeExif(_0xf192b9,_0x3044dd){const _0x3d0fe8=a4_0x4f181e,_0x775801={'NiyMI':function(_0x821dcf){return _0x821dcf();},'HKvFk':function(_0x50765b){return _0x50765b();},'JEZWG':_0x3d0fe8(0xd8)};let _0x1a878e=/webp/['test'](_0xf192b9[_0x3d0fe8(0xc9)])?_0xf192b9[_0x3d0fe8(0x93)]:/image/[_0x3d0fe8(0xd7)](_0xf192b9[_0x3d0fe8(0xc9)])?await imageToWebp(_0xf192b9[_0x3d0fe8(0x93)]):/video/[_0x3d0fe8(0xd7)](_0xf192b9[_0x3d0fe8(0xc9)])?await videoToWebp(_0xf192b9[_0x3d0fe8(0x93)]):'';const _0x55180d=path['join'](_0x775801[_0x3d0fe8(0xbf)](tmpdir),Crypto[_0x3d0fe8(0xb5)](0x6)['readUIntLE'](0x0,0x6)[_0x3d0fe8(0xa4)](0x24)+'.webp'),_0x301d6c=path[_0x3d0fe8(0xa2)](_0x775801[_0x3d0fe8(0xa5)](tmpdir),Crypto[_0x3d0fe8(0xb5)](0x6)[_0x3d0fe8(0xc4)](0x0,0x6)[_0x3d0fe8(0xa4)](0x24)+_0x3d0fe8(0x9d));fs[_0x3d0fe8(0xa0)](_0x55180d,_0x1a878e);if(_0x3044dd['packname']||_0x3044dd[_0x3d0fe8(0xb2)]){const _0x1d021e=new webp[(_0x3d0fe8(0xc0))](),_0x1a543e={'sticker-pack-id':'https://github.com/mruniquehacker/Knightbot','sticker-pack-name':_0x3044dd[_0x3d0fe8(0xe2)],'sticker-pack-publisher':_0x3044dd[_0x3d0fe8(0xb2)],'emojis':_0x3044dd[_0x3d0fe8(0xbb)]?_0x3044dd[_0x3d0fe8(0xbb)]:['']},_0x123f40=Buffer[_0x3d0fe8(0x97)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x5afa58=Buffer[_0x3d0fe8(0x97)](JSON[_0x3d0fe8(0xdd)](_0x1a543e),_0x775801['JEZWG']),_0x5d76d1=Buffer[_0x3d0fe8(0xd9)]([_0x123f40,_0x5afa58]);return _0x5d76d1[_0x3d0fe8(0xc8)](_0x5afa58[_0x3d0fe8(0xb8)],0xe,0x4),await _0x1d021e[_0x3d0fe8(0xaf)](_0x55180d),fs[_0x3d0fe8(0xeb)](_0x55180d),_0x1d021e[_0x3d0fe8(0xa6)]=_0x5d76d1,await _0x1d021e[_0x3d0fe8(0xdf)](_0x301d6c),_0x301d6c;}}module[a4_0x4f181e(0xac)]={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};function a4_0x31a1(){const _0x272499=['LFnuE','.mp4','.webp','default','-preset','writeFileSync','mokAJ','join','1760nVePsy','toString','HKvFk','exif','pCioY','QgTrv','PcglM','Gqdjm','NJrSb','exports','YbDcj','node-webpmux','load','readFileSync','GAZOd','author','MyiTp','3170552ZaUoPA','randomBytes','LjYoG','-vsync','length','.jpg','10602ApxhEm','categories','-vf','crypto','INlpw','NiyMI','Image','error','path','XzhnH','readUIntLE','apply','IJdoR','-loop','writeUIntLE','mimetype','nitXI','TbGWl','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','(((.+)+)+)+$','BDZvO','end','BezWn','toFormat','libwebp','OHmhQ','3rymKCJ','cIfBd','-vcodec','test','utf-8','concat','-ss','UUwKi','-an','stringify','aWLYh','save','rwhfu','nEsKu','packname','IpLqp','search','00:00:00','9194380YEAIRF','addOutputOptions','00:00:05','ZRdGQ','3915282eRkwfZ','unlinkSync','data','1484148uYjUUW','uYpYI','419834bQGdrR','from','462774YOdYSW','https://github.com/mruniquehacker/Knightbot','5RCBZhW'];a4_0x31a1=function(){return _0x272499;};return a4_0x31a1();}