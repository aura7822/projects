'use strict';var a491_0x302f08=a491_0x2ba9;(function(_0x370602,_0x40e7a0){var _0x2a22ba=a491_0x2ba9,_0x3e277b=_0x370602();while(!![]){try{var _0x3a4ea6=-parseInt(_0x2a22ba(0x204))/0x1+parseInt(_0x2a22ba(0x1f9))/0x2+parseInt(_0x2a22ba(0x240))/0x3*(-parseInt(_0x2a22ba(0x23b))/0x4)+-parseInt(_0x2a22ba(0x201))/0x5+-parseInt(_0x2a22ba(0x209))/0x6+parseInt(_0x2a22ba(0x223))/0x7*(-parseInt(_0x2a22ba(0x1fc))/0x8)+-parseInt(_0x2a22ba(0x213))/0x9*(-parseInt(_0x2a22ba(0x234))/0xa);if(_0x3a4ea6===_0x40e7a0)break;else _0x3e277b['push'](_0x3e277b['shift']());}catch(_0x44b927){_0x3e277b['push'](_0x3e277b['shift']());}}}(a491_0x27b1,0x1a344));var _interopRequireWildcard=require('@babel/runtime/helpers/interopRequireWildcard'),_interopRequireDefault=require('@babel/runtime/helpers/interopRequireDefault');Object[a491_0x302f08(0x1f5)](exports,a491_0x302f08(0x1f1),{'value':!![]}),exports[a491_0x302f08(0x1f6)]=parseBitmap,exports['getBuffer']=getBuffer,exports['getBufferAsync']=getBufferAsync;function a491_0x27b1(){var _0x1b311d=['_originalMime','split','3|2|0|1|4','abrupt','XffeE','create','return','irWFr','rhbAB','_exif','4|3|1|5|2|6|0','exif-parser','7pGLyaZ','mime','call','Orientation','iBrSd','throwError','getMIME','tCtoF','_rgba','catch','readUInt32BE','fEWTx','JtZFC','RXhdv','fGATy','./promisify','yAasW','10NqnGJn','fromBuffer','parse','cMEFe','toLowerCase','../constants','HfRMM','4DBHgrP','DcJcu','async','XwPVk','width','178131QRbxQV','composite','getHeight','_background','UgZwx','bitmap','VqTMC','KEgWh','data','awrap','tags','Could\x20not\x20find\x20MIME\x20for\x20Buffer\x20<','getWidth','cb\x20must\x20be\x20a\x20function','ezoVb','Unsupported\x20MIME\x20type:\x20','from','cXvqj','alloc','string','wdJLf','uQqIe','@babel/runtime/helpers/slicedToArray','function','__esModule','constructor','hasAlpha','@babel/runtime/regenerator','defineProperty','parseBitmap','mHDJQ','prev','277986CMBfvb','length','cuikB','367096lINNLC','uMbzv','decoders','FsRcM','xjpbx','243285UPAEuh','sfGLx','default','81741mXylNU','vwhsf','HZkxu','ZTjym','next','1195380kvwZmz','encoders','writeUInt32BE','1|0|4|3|2|6|5','xlAwW','stop','height','MkjwQ','mime\x20must\x20be\x20a\x20string','cdeql','3629079QRdCaY','OXnWn','sent','ObrgT'];a491_0x27b1=function(){return _0x1b311d;};return a491_0x27b1();}var _slicedToArray2=_interopRequireDefault(require(a491_0x302f08(0x1ef))),_regenerator=_interopRequireDefault(require(a491_0x302f08(0x1f4))),_fileType=_interopRequireDefault(require('file-type')),_exifParser=_interopRequireDefault(require(a491_0x302f08(0x222))),_utils=require('@jimp/utils'),constants=_interopRequireWildcard(require(a491_0x302f08(0x239))),MIME=_interopRequireWildcard(require('./mime')),_promisify=_interopRequireDefault(require(a491_0x302f08(0x232)));function getMIMEFromBuffer(_0x1dd90d,_0x3a6f2c){var _0x595253=a491_0x302f08,_0x58602c={'XwPVk':'return','uQqIe':'end'},_0x5383cb;return _regenerator[_0x595253(0x203)][_0x595253(0x23d)](function _0x3bf576(_0x2728fd){var _0x304c8d=_0x595253;while(0x1){switch(_0x2728fd[_0x304c8d(0x1f8)]=_0x2728fd[_0x304c8d(0x208)]){case 0x0:_0x2728fd[_0x304c8d(0x208)]=0x2;return _regenerator[_0x304c8d(0x203)][_0x304c8d(0x249)](_fileType[_0x304c8d(0x203)][_0x304c8d(0x235)](_0x1dd90d));case 0x2:_0x5383cb=_0x2728fd[_0x304c8d(0x215)];if(!_0x5383cb){_0x2728fd[_0x304c8d(0x208)]=0x5;break;}return _0x2728fd[_0x304c8d(0x21a)](_0x58602c[_0x304c8d(0x23e)],_0x5383cb[_0x304c8d(0x224)]);case 0x5:if(!_0x3a6f2c){_0x2728fd[_0x304c8d(0x208)]=0x7;break;}return _0x2728fd['abrupt'](_0x58602c[_0x304c8d(0x23e)],MIME['getType'](_0x3a6f2c));case 0x7:return _0x2728fd[_0x304c8d(0x21a)](_0x58602c[_0x304c8d(0x23e)],null);case 0x8:case _0x58602c[_0x304c8d(0x1ee)]:return _0x2728fd[_0x304c8d(0x20e)]();}}});}function getExifOrientation(_0x48f844){var _0x395c47=a491_0x302f08;return _0x48f844[_0x395c47(0x220)]&&_0x48f844[_0x395c47(0x220)][_0x395c47(0x24a)]&&_0x48f844['_exif'][_0x395c47(0x24a)][_0x395c47(0x226)]||0x1;}function getExifOrientationTransformation(_0x180083){var _0x4156c3=a491_0x302f08,_0x1f235e={'mHDJQ':function(_0x242c96,_0x1f2247){return _0x242c96-_0x1f2247;},'rhbAB':function(_0x2764f0,_0x41f0d8){return _0x2764f0-_0x41f0d8;},'xjpbx':function(_0x4132d1,_0x2c5b19){return _0x4132d1-_0x2c5b19;},'TCLZy':function(_0x332081,_0x878b44){return _0x332081-_0x878b44;},'HZkxu':function(_0x3b74a7,_0x3d1fcb){return _0x3b74a7-_0x3d1fcb;},'ObrgT':function(_0x478ad3,_0x5b8eba){return _0x478ad3-_0x5b8eba;},'RXhdv':function(_0x7297dd,_0x3e9986){return _0x7297dd-_0x3e9986;},'yAasW':function(_0x2cf2ef,_0x367e60){return _0x2cf2ef-_0x367e60;},'cuikB':function(_0x451242,_0x28c347){return _0x451242(_0x28c347);}},_0x51840a=_0x180083[_0x4156c3(0x24c)](),_0x1a2825=_0x180083[_0x4156c3(0x242)]();switch(_0x1f235e[_0x4156c3(0x1fb)](getExifOrientation,_0x180083)){case 0x1:return null;case 0x2:return function(_0x53e640,_0x57d99b){var _0x13562b=_0x4156c3;return[_0x1f235e[_0x13562b(0x1f7)](_0x51840a,_0x53e640)-0x1,_0x57d99b];};case 0x3:return function(_0xdcd9fd,_0x55248f){var _0x22c663=_0x4156c3;return[_0x1f235e['rhbAB'](_0x51840a,_0xdcd9fd)-0x1,_0x1f235e[_0x22c663(0x200)](_0x1a2825-_0x55248f,0x1)];};case 0x4:return function(_0x1f4597,_0x487a66){var _0x12d8cc=_0x4156c3;return[_0x1f4597,_0x1f235e['TCLZy'](_0x1f235e[_0x12d8cc(0x206)](_0x1a2825,_0x487a66),0x1)];};case 0x5:return function(_0x243efa,_0x1dbabf){return[_0x1dbabf,_0x243efa];};case 0x6:return function(_0x3f1198,_0x327cc8){var _0x4d289d=_0x4156c3;return[_0x327cc8,_0x1f235e[_0x4d289d(0x21f)](_0x1a2825,_0x3f1198)-0x1];};case 0x7:return function(_0x219eaf,_0x25deb1){var _0x542794=_0x4156c3;return[_0x1f235e[_0x542794(0x216)](_0x1f235e[_0x542794(0x206)](_0x51840a,_0x25deb1),0x1),_0x1f235e[_0x542794(0x230)](_0x1f235e[_0x542794(0x233)](_0x1a2825,_0x219eaf),0x1)];};case 0x8:return function(_0x55d0a8,_0x3da4e1){return[_0x51840a-_0x3da4e1-0x1,_0x55d0a8];};default:return null;}}function transformBitmap(_0x46f344,_0x17ce7c,_0x490feb,_0x498443){var _0xad1d4e=a491_0x302f08,_0xaaa510={'vwhsf':_0xad1d4e(0x20c),'MkjwQ':function(_0x4bad45,_0x4dcea3){return _0x4bad45<_0x4dcea3;},'iUupF':_0xad1d4e(0x219),'wdJLf':function(_0x1bd4e6,_0x2b278c){return _0x1bd4e6<<_0x2b278c;},'cXvqj':function(_0x2cee9f,_0x1ce003){return _0x2cee9f+_0x1ce003;},'QoIny':function(_0x282b7b,_0xe2dd1f){return _0x282b7b*_0xe2dd1f;},'XffeE':function(_0x5e0938,_0x21270f){return _0x5e0938<<_0x21270f;},'kLvvM':function(_0x2232f3,_0x11a3ce){return _0x2232f3+_0x11a3ce;},'cMEFe':function(_0x4194f1,_0x4dfbac,_0x347004){return _0x4194f1(_0x4dfbac,_0x347004);},'OXnWn':_0xad1d4e(0x203)},_0x1f5f48=_0xaaa510[_0xad1d4e(0x205)][_0xad1d4e(0x218)]('|'),_0x1c0c40=0x0;while(!![]){switch(_0x1f5f48[_0x1c0c40++]){case'0':var _0x1ff5e6=_0x46f344['bitmap'][_0xad1d4e(0x23f)];continue;case'1':var _0x27248f=_0x46f344['bitmap'][_0xad1d4e(0x248)];continue;case'2':_0x46f344[_0xad1d4e(0x245)][_0xad1d4e(0x248)]=_0x5dfc1e;continue;case'3':for(var _0x5ab9a9=0x0;_0xaaa510[_0xad1d4e(0x210)](_0x5ab9a9,_0x17ce7c);_0x5ab9a9++){for(var _0x50fac0=0x0;_0x50fac0<_0x490feb;_0x50fac0++){var _0x89386d=_0xaaa510['iUupF'][_0xad1d4e(0x218)]('|'),_0x3b414a=0x0;while(!![]){switch(_0x89386d[_0x3b414a++]){case'0':var _0x579026=_0xaaa510[_0xad1d4e(0x1ed)](_0xaaa510[_0xad1d4e(0x1ea)](_0xaaa510['QoIny'](_0x1ff5e6,_0x23eec4),_0x574f5a),0x2);continue;case'1':var _0x15fe64=_0x27248f[_0xad1d4e(0x22d)](_0x579026);continue;case'2':var _0x5a8736=_0xaaa510[_0xad1d4e(0x21b)](_0xaaa510['kLvvM'](_0x17ce7c*_0x50fac0,_0x5ab9a9),0x2);continue;case'3':var _0x560c52=_0xaaa510[_0xad1d4e(0x237)](_0x498443,_0x5ab9a9,_0x50fac0),_0xc3eca6=(0x0,_slicedToArray2[_0xaaa510[_0xad1d4e(0x214)]])(_0x560c52,0x2),_0x574f5a=_0xc3eca6[0x0],_0x23eec4=_0xc3eca6[0x1];continue;case'4':_0x5dfc1e[_0xad1d4e(0x20b)](_0x15fe64,_0x5a8736);continue;}break;}}}continue;case'4':var _0x5dfc1e=Buffer[_0xad1d4e(0x1eb)](_0x27248f[_0xad1d4e(0x1fa)]);continue;case'5':_0x46f344[_0xad1d4e(0x245)][_0xad1d4e(0x20f)]=_0x490feb;continue;case'6':_0x46f344['bitmap']['width']=_0x17ce7c;continue;}break;}}function exifRotate(_0x317bac){var _0x166bcc=a491_0x302f08,_0x98268f={'cdeql':function(_0xfb1b9e,_0x180bd0,_0x313d04,_0x508d9c,_0x1d9456){return _0xfb1b9e(_0x180bd0,_0x313d04,_0x508d9c,_0x1d9456);},'FsRcM':function(_0x8db588,_0x2c2f76){return _0x8db588(_0x2c2f76);},'tCtoF':function(_0x1941f8,_0x21bb2f){return _0x1941f8>_0x21bb2f;},'NgFvl':function(_0x1aa23c,_0x527eb0){return _0x1aa23c<_0x527eb0;}},_0x26197c='5|1|2|4|3|0'[_0x166bcc(0x218)]('|'),_0x2eed64=0x0;while(!![]){switch(_0x26197c[_0x2eed64++]){case'0':_0x98268f[_0x166bcc(0x212)](transformBitmap,_0x317bac,_0x4d14b9,_0x24d36c,_0x461749);continue;case'1':var _0x461749=_0x98268f[_0x166bcc(0x1ff)](getExifOrientationTransformation,_0x317bac);continue;case'2':var _0x58294c=_0x98268f[_0x166bcc(0x22a)](getExifOrientation(_0x317bac),0x4);continue;case'3':var _0x24d36c=_0x58294c?_0x317bac[_0x166bcc(0x245)]['width']:_0x317bac['bitmap'][_0x166bcc(0x20f)];continue;case'4':var _0x4d14b9=_0x58294c?_0x317bac[_0x166bcc(0x245)][_0x166bcc(0x20f)]:_0x317bac['bitmap'][_0x166bcc(0x23f)];continue;case'5':if(_0x98268f['NgFvl'](_0x98268f[_0x166bcc(0x1ff)](getExifOrientation,_0x317bac),0x2))return;continue;}break;}}function a491_0x2ba9(_0xe86c7c,_0x11650e){var _0x27b177=a491_0x27b1();return a491_0x2ba9=function(_0x2ba985,_0x57b621){_0x2ba985=_0x2ba985-0x1e9;var _0x528275=_0x27b177[_0x2ba985];return _0x528275;},a491_0x2ba9(_0xe86c7c,_0x11650e);}function parseBitmap(_0x1801d4,_0x1e136d,_0x5bae86){var _0x2e7139=a491_0x302f08,_0x33443c={'ZTjym':_0x2e7139(0x203),'nJptn':function(_0x13a9ef,_0x79d9b0,_0x3d8d42){return _0x13a9ef(_0x79d9b0,_0x3d8d42);},'FfqWv':function(_0x1d57bc,_0x5595aa){return _0x1d57bc!==_0x5595aa;},'HfRMM':'string','DcJcu':_0x2e7139(0x21d),'VqTMC':function(_0x76c1d0,_0x9ed5a9){return _0x76c1d0(_0x9ed5a9);},'JWtlz':function(_0x4b9972,_0x2c5933){return _0x4b9972+_0x2c5933;},'sfGLx':_0x2e7139(0x24f),'irWFr':_0x2e7139(0x22c),'UgZwx':function(_0x31122d,_0x2b95af){return _0x31122d(_0x2b95af);}},_0x2271de,_0x416827;return _regenerator[_0x33443c[_0x2e7139(0x207)]][_0x2e7139(0x23d)](function _0x2697bf(_0x22e2c8){var _0x4efac9=_0x2e7139;while(0x1){switch(_0x22e2c8[_0x4efac9(0x1f8)]=_0x22e2c8[_0x4efac9(0x208)]){case 0x0:_0x22e2c8[_0x4efac9(0x208)]=0x2;return _regenerator[_0x33443c[_0x4efac9(0x207)]]['awrap'](_0x33443c['nJptn'](getMIMEFromBuffer,_0x1801d4,_0x1e136d));case 0x2:_0x2271de=_0x22e2c8[_0x4efac9(0x215)];if(!_0x33443c['FfqWv'](typeof _0x2271de,_0x33443c[_0x4efac9(0x23a)])){_0x22e2c8[_0x4efac9(0x208)]=0x5;break;}return _0x22e2c8['abrupt'](_0x33443c[_0x4efac9(0x23c)],_0x33443c[_0x4efac9(0x246)](_0x5bae86,new Error(_0x33443c['JWtlz'](_0x4efac9(0x24b),_0x1e136d)+'>')));case 0x5:this[_0x4efac9(0x217)]=_0x2271de[_0x4efac9(0x238)](),_0x22e2c8[_0x4efac9(0x1f8)]=0x6,_0x416827=this[_0x4efac9(0x229)]();if(!this[_0x4efac9(0x1f2)][_0x4efac9(0x1fe)][_0x416827]){_0x22e2c8[_0x4efac9(0x208)]=0xc;break;}this[_0x4efac9(0x245)]=this[_0x4efac9(0x1f2)]['decoders'][_0x416827](_0x1801d4),_0x22e2c8[_0x4efac9(0x208)]=0xd;break;case 0xc:return _0x22e2c8[_0x4efac9(0x21a)](_0x33443c[_0x4efac9(0x23c)],_utils[_0x4efac9(0x228)]['call'](this,_0x33443c[_0x4efac9(0x202)]+_0x416827,_0x5bae86));case 0xd:_0x22e2c8['next']=0x12;break;case 0xf:_0x22e2c8[_0x4efac9(0x1f8)]=0xf,_0x22e2c8['t0']=_0x22e2c8[_0x33443c[_0x4efac9(0x21e)]](0x6);return _0x22e2c8[_0x4efac9(0x21a)](_0x33443c['DcJcu'],_0x5bae86[_0x4efac9(0x225)](this,_0x22e2c8['t0'],this));case 0x12:try{this[_0x4efac9(0x220)]=_exifParser[_0x33443c[_0x4efac9(0x207)]][_0x4efac9(0x21c)](_0x1801d4)[_0x4efac9(0x236)](),_0x33443c[_0x4efac9(0x244)](exifRotate,this);}catch(_0x12cee9){}_0x5bae86['call'](this,null,this);return _0x22e2c8['abrupt']('return',this);case 0x15:case'end':return _0x22e2c8[_0x4efac9(0x20e)]();}}},null,this,[[0x6,0xf]]);}function compositeBitmapOverBackground(_0x5d0ecf,_0x388058){var _0x9b85c5=a491_0x302f08;return new _0x5d0ecf(_0x388058[_0x9b85c5(0x245)][_0x9b85c5(0x23f)],_0x388058[_0x9b85c5(0x245)]['height'],_0x388058[_0x9b85c5(0x243)])[_0x9b85c5(0x241)](_0x388058,0x0,0x0)[_0x9b85c5(0x245)];}function getBuffer(_0x5351b8,_0x327c30){var _0x245e55=a491_0x302f08,_0x2f1837={'iBrSd':_0x245e55(0x221),'fGATy':function(_0x378321,_0x378301){return _0x378321!==_0x378301;},'uMbzv':_0x245e55(0x24d),'KEgWh':_0x245e55(0x1ec),'RnYFH':_0x245e55(0x211),'xlAwW':function(_0x54a640,_0x1471ae){return _0x54a640===_0x1471ae;},'ezoVb':function(_0x2f6f88,_0x23a81e){return _0x2f6f88+_0x23a81e;},'fEWTx':_0x245e55(0x24f)},_0x569f91=_0x2f1837[_0x245e55(0x227)][_0x245e55(0x218)]('|'),_0xebd646=0x0;while(!![]){switch(_0x569f91[_0xebd646++]){case'0':return this;case'1':if(_0x2f1837['fGATy'](typeof _0x327c30,_0x245e55(0x1f0)))return _utils[_0x245e55(0x228)][_0x245e55(0x225)](this,_0x2f1837[_0x245e55(0x1fd)],_0x327c30);continue;case'2':this[_0x245e55(0x22b)]&&this['constructor'][_0x245e55(0x1f3)][_0x5351b8]?this['bitmap'][_0x245e55(0x248)]=Buffer[_0x245e55(0x1e9)](this[_0x245e55(0x245)][_0x245e55(0x248)]):this[_0x245e55(0x245)][_0x245e55(0x248)]=compositeBitmapOverBackground(this[_0x245e55(0x1f2)],this)[_0x245e55(0x248)];continue;case'3':if(_0x2f1837[_0x245e55(0x231)](typeof _0x5351b8,_0x2f1837[_0x245e55(0x247)]))return _utils['throwError'][_0x245e55(0x225)](this,_0x2f1837['RnYFH'],_0x327c30);continue;case'4':_0x2f1837[_0x245e55(0x20d)](_0x5351b8,constants['AUTO'])&&(_0x5351b8=this[_0x245e55(0x229)]());continue;case'5':_0x5351b8=_0x5351b8['toLowerCase']();continue;case'6':if(this[_0x245e55(0x1f2)]['encoders'][_0x5351b8]){var _0x5820f9=this[_0x245e55(0x1f2)][_0x245e55(0x20a)][_0x5351b8](this);_0x327c30['call'](this,null,_0x5820f9);}else _0x327c30[_0x245e55(0x225)](this,_0x2f1837[_0x245e55(0x24e)](_0x2f1837[_0x245e55(0x22e)],_0x5351b8));continue;}break;}}function getBufferAsync(_0x362469){var _0x341012=a491_0x302f08,_0x181f02={'JtZFC':_0x341012(0x203)};return(0x0,_promisify[_0x181f02[_0x341012(0x22f)]])(getBuffer,this,_0x362469);}