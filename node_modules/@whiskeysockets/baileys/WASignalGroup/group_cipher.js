function a1163_0x4f0f(){const _0x383605=['TfJyn','No\x20SenderKeyRecord\x20found\x20for\x20encryption','queueJob','145404dbJZOX','qTFnH','xYTFt','getKeyId','verifySignature','getSenderKey','No\x20SenderKeyRecord\x20found\x20for\x20decryption','McWOB','loadSenderKey','getNext','encrypt','getSenderChainKey','No\x20session\x20to\x20encrypt\x20message','13013184FyoEnk','596750dBuonV','string','1115559IMmrZU','18092TnzcpZ','getCipherKey','base64','exports','senderKeyStore','72nJIDlq','OIPGY','3050000esKnby','getPlainText','4396794VaCOgB','Over\x202000\x20messages\x20into\x20the\x20future!','getSenderMessageKey','decrypt','serialize','getIteration','senderKeyName','getSenderKeyState','hasSenderMessageKey','from','getCipherText','storeSenderKey','KPfpq','No\x20session\x20found\x20to\x20decrypt\x20message','getSigningKeyPrivate','getSigningKeyPublic','QrZsh','addSenderMessageKey','setSenderChainKey'];a1163_0x4f0f=function(){return _0x383605;};return a1163_0x4f0f();}const a1163_0x2eeaa4=a1163_0x5d41;(function(_0x324854,_0x443816){const _0x13168f=a1163_0x5d41,_0x3813bf=_0x324854();while(!![]){try{const _0x5ef95c=parseInt(_0x13168f(0x218))/0x1+parseInt(_0x13168f(0x219))/0x2*(-parseInt(_0x13168f(0x1ee))/0x3)+parseInt(_0x13168f(0x1f0))/0x4+-parseInt(_0x13168f(0x216))/0x5+parseInt(_0x13168f(0x1f2))/0x6+-parseInt(_0x13168f(0x208))/0x7+-parseInt(_0x13168f(0x215))/0x8;if(_0x5ef95c===_0x443816)break;else _0x3813bf['push'](_0x3813bf['shift']());}catch(_0x217deb){_0x3813bf['push'](_0x3813bf['shift']());}}}(a1163_0x4f0f,0x99128));const queue_job=require('./queue_job'),SenderKeyMessage=require('./sender_key_message'),crypto=require('libsignal/src/crypto');function a1163_0x5d41(_0x323b8c,_0x3407b6){const _0x4f0f71=a1163_0x4f0f();return a1163_0x5d41=function(_0x5d41c4,_0x25e514){_0x5d41c4=_0x5d41c4-0x1eb;let _0x4e49f9=_0x4f0f71[_0x5d41c4];return _0x4e49f9;},a1163_0x5d41(_0x323b8c,_0x3407b6);}class GroupCipher{constructor(_0x3f1403,_0xc57db1){const _0x1decc6=a1163_0x5d41;this[_0x1decc6(0x1ed)]=_0x3f1403,this[_0x1decc6(0x1f8)]=_0xc57db1;}[a1163_0x2eeaa4(0x207)](_0x1d9d02){const _0x58cd61=a1163_0x2eeaa4,_0x51ae42={'ADtiZ':function(_0x1892c5,_0x18470e,_0x2738fd){return _0x1892c5(_0x18470e,_0x2738fd);}};return _0x51ae42['ADtiZ'](queue_job,this[_0x58cd61(0x1f8)]['toString'](),_0x1d9d02);}async[a1163_0x2eeaa4(0x212)](_0x166df6){const _0x1e91c5=a1163_0x2eeaa4,_0x16688f={'OIPGY':_0x1e91c5(0x206)};return await this[_0x1e91c5(0x207)](async()=>{const _0x3c2f26=_0x1e91c5,_0x2fd3e2=await this['senderKeyStore'][_0x3c2f26(0x210)](this['senderKeyName']);if(!_0x2fd3e2)throw new Error(_0x16688f[_0x3c2f26(0x1ef)]);const _0x510702=_0x2fd3e2['getSenderKeyState']();if(!_0x510702)throw new Error(_0x3c2f26(0x214));const _0x557b02=_0x510702[_0x3c2f26(0x213)]()['getIteration'](),_0x38f016=this[_0x3c2f26(0x20d)](_0x510702,_0x557b02===0x0?0x0:_0x557b02+0x1),_0x5d53fe=await this[_0x3c2f26(0x1fc)](_0x38f016['getIv'](),_0x38f016[_0x3c2f26(0x21a)](),_0x166df6),_0x5a0a85=new SenderKeyMessage(_0x510702['getKeyId'](),_0x38f016[_0x3c2f26(0x1f7)](),_0x5d53fe,_0x510702[_0x3c2f26(0x200)]());return await this[_0x3c2f26(0x1ed)][_0x3c2f26(0x1fd)](this['senderKeyName'],_0x2fd3e2),_0x5a0a85[_0x3c2f26(0x1f6)]();});}async['decrypt'](_0x20504a){const _0x771a30=a1163_0x2eeaa4,_0x3cd62c={'TfJyn':_0x771a30(0x20e),'McWOB':_0x771a30(0x1ff)};return await this['queueJob'](async()=>{const _0x56e8e4=_0x771a30,_0x3244c9=await this[_0x56e8e4(0x1ed)]['loadSenderKey'](this[_0x56e8e4(0x1f8)]);if(!_0x3244c9)throw new Error(_0x3cd62c[_0x56e8e4(0x205)]);const _0x2901a0=new SenderKeyMessage(null,null,null,null,_0x20504a),_0x37b5a0=_0x3244c9[_0x56e8e4(0x1f9)](_0x2901a0[_0x56e8e4(0x20b)]());if(!_0x37b5a0)throw new Error(_0x3cd62c[_0x56e8e4(0x20f)]);_0x2901a0[_0x56e8e4(0x20c)](_0x37b5a0[_0x56e8e4(0x201)]());const _0x3750d6=this['getSenderKey'](_0x37b5a0,_0x2901a0[_0x56e8e4(0x1f7)]()),_0x3d79c7=await this[_0x56e8e4(0x1f1)](_0x3750d6['getIv'](),_0x3750d6[_0x56e8e4(0x21a)](),_0x2901a0[_0x56e8e4(0x1fc)]());return await this['senderKeyStore'][_0x56e8e4(0x1fd)](this[_0x56e8e4(0x1f8)],_0x3244c9),_0x3d79c7;});}[a1163_0x2eeaa4(0x20d)](_0x4127fb,_0x34fe15){const _0x27df27=a1163_0x2eeaa4,_0x35b230={'QrZsh':function(_0xd0b2dc,_0x446bb3){return _0xd0b2dc>_0x446bb3;},'kErcS':_0x27df27(0x1f3),'xYTFt':function(_0x2d8469,_0x4706b7){return _0x2d8469<_0x4706b7;}};let _0x5e9274=_0x4127fb[_0x27df27(0x213)]();if(_0x35b230[_0x27df27(0x202)](_0x5e9274['getIteration'](),_0x34fe15)){if(_0x4127fb[_0x27df27(0x1fa)](_0x34fe15))return _0x4127fb['removeSenderMessageKey'](_0x34fe15);throw new Error('Received\x20message\x20with\x20old\x20counter:\x20'+_0x5e9274[_0x27df27(0x1f7)]()+',\x20'+_0x34fe15);}if(_0x35b230['QrZsh'](_0x34fe15-_0x5e9274['getIteration'](),0x7d0))throw new Error(_0x35b230['kErcS']);while(_0x35b230[_0x27df27(0x20a)](_0x5e9274[_0x27df27(0x1f7)](),_0x34fe15)){_0x4127fb[_0x27df27(0x203)](_0x5e9274['getSenderMessageKey']()),_0x5e9274=_0x5e9274[_0x27df27(0x211)]();}return _0x4127fb[_0x27df27(0x204)](_0x5e9274[_0x27df27(0x211)]()),_0x5e9274[_0x27df27(0x1f4)]();}[a1163_0x2eeaa4(0x1f1)](_0x4b0b52,_0x595a3c,_0x1c56d1){const _0x350012=a1163_0x2eeaa4;try{const _0xb86b75=crypto[_0x350012(0x1f5)](_0x595a3c,_0x1c56d1,_0x4b0b52);return _0xb86b75;}catch(_0x34a4a7){throw new Error('InvalidMessageException');}}[a1163_0x2eeaa4(0x1fc)](_0x63f18b,_0x4e549d,_0xb2d56f){const _0x37e3e6=a1163_0x2eeaa4,_0x3fb66a={'qTFnH':function(_0x38b9fc,_0x458e03){return _0x38b9fc===_0x458e03;},'KPfpq':_0x37e3e6(0x217),'CuwCG':'InvalidMessageException'};try{_0x63f18b=_0x3fb66a[_0x37e3e6(0x209)](typeof _0x63f18b,_0x3fb66a[_0x37e3e6(0x1fe)])?Buffer[_0x37e3e6(0x1fb)](_0x63f18b,_0x37e3e6(0x1eb)):_0x63f18b,_0x4e549d=_0x3fb66a[_0x37e3e6(0x209)](typeof _0x4e549d,_0x3fb66a[_0x37e3e6(0x1fe)])?Buffer[_0x37e3e6(0x1fb)](_0x4e549d,'base64'):_0x4e549d;const _0x4b834c=crypto[_0x37e3e6(0x212)](_0x4e549d,Buffer[_0x37e3e6(0x1fb)](_0xb2d56f),_0x63f18b);return _0x4b834c;}catch(_0x31adfd){throw new Error(_0x3fb66a['CuwCG']);}}}module[a1163_0x2eeaa4(0x1ec)]=GroupCipher;