'use strict';function a1223_0x18ba(_0x5951e1,_0x81b3c1){const _0x47aa86=a1223_0x47aa();return a1223_0x18ba=function(_0x18ba85,_0x34dcb5){_0x18ba85=_0x18ba85-0xda;let _0x390f18=_0x47aa86[_0x18ba85];return _0x390f18;},a1223_0x18ba(_0x5951e1,_0x81b3c1);}const a1223_0x37ff7a=a1223_0x18ba;(function(_0xacaae5,_0x2c9178){const _0x330313=a1223_0x18ba,_0x3ba161=_0xacaae5();while(!![]){try{const _0x1d4dda=parseInt(_0x330313(0xf8))/0x1+-parseInt(_0x330313(0x119))/0x2+-parseInt(_0x330313(0xff))/0x3+-parseInt(_0x330313(0x11d))/0x4*(-parseInt(_0x330313(0x102))/0x5)+-parseInt(_0x330313(0x107))/0x6*(-parseInt(_0x330313(0xe5))/0x7)+parseInt(_0x330313(0x12b))/0x8*(parseInt(_0x330313(0x105))/0x9)+-parseInt(_0x330313(0xe7))/0xa*(parseInt(_0x330313(0x11e))/0xb);if(_0x1d4dda===_0x2c9178)break;else _0x3ba161['push'](_0x3ba161['shift']());}catch(_0xf4ee77){_0x3ba161['push'](_0x3ba161['shift']());}}}(a1223_0x47aa,0x25557));Object[a1223_0x37ff7a(0x128)](exports,a1223_0x37ff7a(0x108),{'value':!![]}),exports[a1223_0x37ff7a(0xfc)]=exports[a1223_0x37ff7a(0x114)]=exports[a1223_0x37ff7a(0xfa)]=exports[a1223_0x37ff7a(0x101)]=exports[a1223_0x37ff7a(0xf2)]=exports['xmppSignedPreKey']=exports['generateOrGetPreKeys']=exports[a1223_0x37ff7a(0xda)]=exports[a1223_0x37ff7a(0xfe)]=void 0x0;const lodash_1=require('lodash'),Defaults_1=require(a1223_0x37ff7a(0x129)),WABinary_1=require('../WABinary'),crypto_1=require(a1223_0x37ff7a(0x104)),generics_1=require(a1223_0x37ff7a(0xdd)),createSignalIdentity=(_0x5a2a44,_0x440d81)=>{return{'identifier':{'name':_0x5a2a44,'deviceId':0x0},'identifierKey':(0x0,crypto_1['generateSignalPubKey'])(_0x440d81)};};exports[a1223_0x37ff7a(0xfe)]=createSignalIdentity;const getPreKeys=async({get:_0x1bdb6f},_0x15b21f,_0x2deb47)=>{const _0x2e97a8=a1223_0x37ff7a,_0x1f5d1e={'VlaJT':function(_0x11d69d,_0xe801a3){return _0x11d69d<_0xe801a3;}},_0x26b228=[];for(let _0x44a564=_0x15b21f;_0x1f5d1e[_0x2e97a8(0xf5)](_0x44a564,_0x2deb47);_0x44a564++){_0x26b228['push'](_0x44a564[_0x2e97a8(0xfb)]());}return _0x1bdb6f('pre-key',_0x26b228);};exports['getPreKeys']=getPreKeys;const generateOrGetPreKeys=(_0x2349b5,_0x391084)=>{const _0x1decc1=a1223_0x37ff7a,_0x4a94d5={'msLEW':function(_0x57348b,_0xcc5498){return _0x57348b-_0xcc5498;},'yXoRB':function(_0x3d3662,_0x3c8e8a){return _0x3d3662-_0x3c8e8a;},'XQDwS':function(_0x261d59,_0x43eb2){return _0x261d59+_0x43eb2;},'aVPmo':function(_0x1f8f9a,_0x5c3a95){return _0x1f8f9a>_0x5c3a95;},'TYxnm':function(_0x1b3556,_0x97f7ad){return _0x1b3556<=_0x97f7ad;}},_0x278455=_0x4a94d5[_0x1decc1(0xe6)](_0x2349b5[_0x1decc1(0x10b)],_0x2349b5[_0x1decc1(0x125)]),_0x4abae6=_0x4a94d5[_0x1decc1(0x115)](_0x391084,_0x278455),_0x5159f7=_0x4a94d5[_0x1decc1(0x115)](_0x4a94d5[_0x1decc1(0x109)](_0x2349b5['nextPreKeyId'],_0x4abae6),0x1),_0x1c59a7={};if(_0x4a94d5[_0x1decc1(0x11b)](_0x4abae6,0x0))for(let _0x3f66c8=_0x2349b5[_0x1decc1(0x10b)];_0x4a94d5['TYxnm'](_0x3f66c8,_0x5159f7);_0x3f66c8++){_0x1c59a7[_0x3f66c8]=crypto_1[_0x1decc1(0xf4)][_0x1decc1(0x124)]();}return{'newPreKeys':_0x1c59a7,'lastPreKeyId':_0x5159f7,'preKeysRange':[_0x2349b5[_0x1decc1(0x125)],_0x391084]};};exports[a1223_0x37ff7a(0xe2)]=generateOrGetPreKeys;const xmppSignedPreKey=_0xafc168=>({'tag':'skey','attrs':{},'content':[{'tag':'id','attrs':{},'content':(0x0,generics_1[a1223_0x37ff7a(0xe0)])(_0xafc168[a1223_0x37ff7a(0xeb)],0x3)},{'tag':a1223_0x37ff7a(0x117),'attrs':{},'content':_0xafc168[a1223_0x37ff7a(0xf1)][a1223_0x37ff7a(0x118)]},{'tag':a1223_0x37ff7a(0x11f),'attrs':{},'content':_0xafc168['signature']}]});function a1223_0x47aa(){const _0x430280=['identity','sfCVt','defineProperty','../Defaults','getBinaryNodeChild','154016rOhTEB','vcqzH','getPreKeys','registrationId','wUGOS','./generics','qwwNz','MUmwJ','encodeBigEndian','jidDecode','generateOrGetPreKeys','set','signedIdentityKey','19817RKzxBz','msLEW','1850RbzZny','generateSignalPubKey','BgDqc','isArray','keyId','list','getBinaryNodeChildren','keys','WRDBY','user','keyPair','xmppPreKey','type','Curve','VlaJT','YgxkB','rcKzo','209234aguMbl','zmCfD','extractDeviceJids','toString','getNextPreKeysNode','getBinaryNodeChildUInt','createSignalIdentity','289665JmjwJh','injectE2ESession','parseAndInjectE2ESessions','50845JyBrzc','registration','./crypto','27dTVHWb','iohDH','468XSGmkU','__esModule','XQDwS','getBinaryNodeChildBuffer','nextPreKeyId','S_WHATSAPP_NET','signedPreKey','all','qLlSt','RlOGu','OUsKb','skey','NTlCm','getNextPreKeys','yXoRB','chunk','value','public','13964TMKUzR','mOPDO','aVPmo','max','68BkMWlc','24035FgNKwZ','signature','SMYMN','key','encrypt','deviceList','generateKeyPair','firstUnuploadedPreKeyId'];a1223_0x47aa=function(){return _0x430280;};return a1223_0x47aa();}exports['xmppSignedPreKey']=xmppSignedPreKey;const xmppPreKey=(_0x29b4f5,_0x4d6ffc)=>({'tag':a1223_0x37ff7a(0x121),'attrs':{},'content':[{'tag':'id','attrs':{},'content':(0x0,generics_1[a1223_0x37ff7a(0xe0)])(_0x4d6ffc,0x3)},{'tag':a1223_0x37ff7a(0x117),'attrs':{},'content':_0x29b4f5[a1223_0x37ff7a(0x118)]}]});exports[a1223_0x37ff7a(0xf2)]=xmppPreKey;const parseAndInjectE2ESessions=async(_0x33e55e,_0xd8d3ab)=>{const _0x3041b8=a1223_0x37ff7a,_0x4b69b5={'MUmwJ':_0x3041b8(0x112),'YgxkB':_0x3041b8(0x126),'NTlCm':_0x3041b8(0x103),'iohDH':function(_0x132f3a,_0x56ac69){return _0x132f3a(_0x56ac69);},'BgDqc':function(_0x20728c,_0x261487){return _0x20728c(_0x261487);},'SMYMN':_0x3041b8(0xf0)},_0x18cb8f=_0x44af01=>_0x44af01?{'keyId':(0x0,WABinary_1['getBinaryNodeChildUInt'])(_0x44af01,'id',0x3),'publicKey':(0x0,crypto_1[_0x3041b8(0xe8)])((0x0,WABinary_1[_0x3041b8(0x10a)])(_0x44af01,_0x3041b8(0x117))),'signature':(0x0,WABinary_1[_0x3041b8(0x10a)])(_0x44af01,_0x3041b8(0x11f))}:undefined,_0x49b161=(0x0,WABinary_1[_0x3041b8(0xed)])((0x0,WABinary_1[_0x3041b8(0x12a)])(_0x33e55e,_0x3041b8(0xec)),_0x4b69b5[_0x3041b8(0x120)]);for(const _0x5d1c06 of _0x49b161){(0x0,WABinary_1['assertNodeErrorFree'])(_0x5d1c06);}const _0x5ddf5a=0x64,_0x1bcdb1=(0x0,lodash_1[_0x3041b8(0x116)])(_0x49b161,_0x5ddf5a);for(const _0x854b32 of _0x1bcdb1){await Promise[_0x3041b8(0x10e)](_0x854b32['map'](async _0xdbf67f=>{const _0x565f7b=_0x3041b8,_0x29688f=(0x0,WABinary_1[_0x565f7b(0x12a)])(_0xdbf67f,_0x4b69b5[_0x565f7b(0xdf)]),_0x3850ac=(0x0,WABinary_1[_0x565f7b(0x12a)])(_0xdbf67f,_0x565f7b(0x121)),_0x488112=(0x0,WABinary_1[_0x565f7b(0x10a)])(_0xdbf67f,_0x4b69b5[_0x565f7b(0xf6)]),_0x2608ab=_0xdbf67f['attrs']['jid'],_0x3f6c1e=(0x0,WABinary_1[_0x565f7b(0xfd)])(_0xdbf67f,_0x4b69b5[_0x565f7b(0x113)],0x4);await _0xd8d3ab[_0x565f7b(0x100)]({'jid':_0x2608ab,'session':{'registrationId':_0x3f6c1e,'identityKey':(0x0,crypto_1[_0x565f7b(0xe8)])(_0x488112),'signedPreKey':_0x4b69b5[_0x565f7b(0x106)](_0x18cb8f,_0x29688f),'preKey':_0x4b69b5[_0x565f7b(0xe9)](_0x18cb8f,_0x3850ac)}});}));}};exports['parseAndInjectE2ESessions']=parseAndInjectE2ESessions;const extractDeviceJids=(_0x1eac2d,_0x1c15b1,_0x26e764)=>{const _0x5408d0=a1223_0x37ff7a,_0xdee855={'wUGOS':function(_0xd7f3c1,_0x4737e8){return _0xd7f3c1===_0x4737e8;},'vcqzH':function(_0x5acd6e,_0x5aa7fd){return _0x5acd6e===_0x5aa7fd;},'WRDBY':function(_0x570988,_0x3fbd35){return _0x570988!==_0x3fbd35;},'jDtLq':function(_0x2ecc65,_0x1a1081){return _0x2ecc65!==_0x1a1081;},'qLlSt':function(_0x46579f,_0x3817b3){return _0x46579f===_0x3817b3;}},{user:_0x14b197,device:_0x37fa50}=(0x0,WABinary_1[_0x5408d0(0xe1)])(_0x1c15b1),_0x11c39c=[];for(const _0x3c1861 of _0x1eac2d){const {devices:_0x5f3e3a,id:_0x5f2e16}=_0x3c1861,{user:_0x545e36}=(0x0,WABinary_1[_0x5408d0(0xe1)])(_0x5f2e16),_0x41e500=_0xdee855[_0x5408d0(0xdc)](_0x5f3e3a,null)||_0xdee855[_0x5408d0(0x12c)](_0x5f3e3a,void 0x0)?void 0x0:_0x5f3e3a[_0x5408d0(0x123)];if(Array[_0x5408d0(0xea)](_0x41e500))for(const {id:_0x3790d3,keyIndex:_0xd321d5}of _0x41e500){(!_0x26e764||_0x3790d3!==0x0)&&(_0xdee855[_0x5408d0(0xef)](_0x14b197,_0x545e36)||_0xdee855['jDtLq'](_0x37fa50,_0x3790d3))&&(_0xdee855[_0x5408d0(0x10f)](_0x3790d3,0x0)||!!_0xd321d5)&&_0x11c39c['push']({'user':_0x545e36,'device':_0x3790d3});}}return _0x11c39c;};exports[a1223_0x37ff7a(0xfa)]=extractDeviceJids;const getNextPreKeys=async({creds:_0x4f483e,keys:_0x24d3e5},_0x5d078c)=>{const _0x4d1d4d=a1223_0x37ff7a,_0x270ed8={'qwwNz':function(_0x3c7968,_0x3b7b20){return _0x3c7968+_0x3b7b20;}},{newPreKeys:_0x3b41d3,lastPreKeyId:_0x1617ef,preKeysRange:_0x2c1dee}=(0x0,exports[_0x4d1d4d(0xe2)])(_0x4f483e,_0x5d078c),_0x2fea57={'nextPreKeyId':Math['max'](_0x1617ef+0x1,_0x4f483e['nextPreKeyId']),'firstUnuploadedPreKeyId':Math[_0x4d1d4d(0x11c)](_0x4f483e[_0x4d1d4d(0x125)],_0x270ed8[_0x4d1d4d(0xde)](_0x1617ef,0x1))};await _0x24d3e5['set']({'pre-key':_0x3b41d3});const _0x5daefa=await(0x0,exports[_0x4d1d4d(0xda)])(_0x24d3e5,_0x2c1dee[0x0],_0x270ed8['qwwNz'](_0x2c1dee[0x0],_0x2c1dee[0x1]));return{'update':_0x2fea57,'preKeys':_0x5daefa};};exports[a1223_0x37ff7a(0x114)]=getNextPreKeys;const getNextPreKeysNode=async(_0x1ea0f4,_0x2be29e)=>{const _0xc959e=a1223_0x37ff7a,_0x5d4bd6={'sfCVt':_0xc959e(0x122),'mOPDO':_0xc959e(0xe3),'rcKzo':_0xc959e(0x103),'OUsKb':_0xc959e(0xf3),'zmCfD':'identity','RlOGu':'list'},{creds:_0x244387}=_0x1ea0f4,{update:_0xa13527,preKeys:_0x3d2cc9}=await(0x0,exports['getNextPreKeys'])(_0x1ea0f4,_0x2be29e),_0x5e96f6={'tag':'iq','attrs':{'xmlns':_0x5d4bd6[_0xc959e(0x127)],'type':_0x5d4bd6[_0xc959e(0x11a)],'to':WABinary_1[_0xc959e(0x10c)]},'content':[{'tag':_0x5d4bd6[_0xc959e(0xf7)],'attrs':{},'content':(0x0,generics_1[_0xc959e(0xe0)])(_0x244387[_0xc959e(0xdb)])},{'tag':_0x5d4bd6[_0xc959e(0x111)],'attrs':{},'content':Defaults_1['KEY_BUNDLE_TYPE']},{'tag':_0x5d4bd6[_0xc959e(0xf9)],'attrs':{},'content':_0x244387[_0xc959e(0xe4)][_0xc959e(0x118)]},{'tag':_0x5d4bd6[_0xc959e(0x110)],'attrs':{},'content':Object[_0xc959e(0xee)](_0x3d2cc9)['map'](_0x4110d8=>(0x0,exports['xmppPreKey'])(_0x3d2cc9[+_0x4110d8],+_0x4110d8))},(0x0,exports['xmppSignedPreKey'])(_0x244387[_0xc959e(0x10d)])]};return{'update':_0xa13527,'node':_0x5e96f6};};exports[a1223_0x37ff7a(0xfc)]=getNextPreKeysNode;