const a481_0x1bf31e=a481_0x9014;function a481_0x1afb(){const _0x38b519=['ArVvc','GEwub','vLsmu','12krgtXg','uhwmJ','iupnH','Function\x20failed,\x20queuing\x20for\x20retry\x20with\x20task\x20','216979wpXvfu','xFfdK','retry','QsAyj','\x20failed,\x20requeueing\x20to\x20try\x20again.','\x20pending,\x20','Synchronous\x20error:\x20','ZMiQw','Promise\x20executor\x20did\x20not\x20initialize\x20resolve\x20or\x20reject.','60488TKkHhF','Function\x20called\x20successfully\x20without\x20retry.','working','withResolvers','reason','signal','push','shift','uRLhA','HGVRT','error','lBQot','Processed\x20pending\x20tasks:\x20','5623632NxNHGa','max','Task\x20','Processing\x20retry\x20queue:\x20','\x20succeeded\x20after\x20','random','pending','Missing\x20function\x20to\x20check\x20errors','VKGzy','\x20working.','toString','672435QHLoOm','\x20is\x20not\x20ready\x20to\x20retry,\x20skipping.','lastAttempt','min','QLPdK','SxPaL','ieNJd','@hwc/retry','retrying','message','QtXGq','addEventListener','age','function','\x20failed\x20with\x20non-retryable\x20error:\x20','slice','resolve','env','\x20was\x20abandoned\x20due\x20to\x20timeout.','then','Iprrb','\x20was\x20aborted\x20due\x20to\x20AbortSignal.','reject','1020890cybSiT','24EarjzT','12378123KuSVon','Result\x20is\x20not\x20a\x20promise.','QOwZk','347608YKhfXR','length','throwIfAborted','now','timestamp','XYaer','finally','DEBUG','\x20retrying,\x20','ZROfA','catch','GTdKu','Kqkem','Processing\x20pending\x20tasks:\x20','PvnaE'];a481_0x1afb=function(){return _0x38b519;};return a481_0x1afb();}(function(_0xc39b46,_0x562e42){const _0xefe640=a481_0x9014,_0x3930cb=_0xc39b46();while(!![]){try{const _0x19bfe6=-parseInt(_0xefe640(0x234))/0x1+-parseInt(_0xefe640(0x205))/0x2*(parseInt(_0xefe640(0x235))/0x3)+-parseInt(_0xefe640(0x239))/0x4+-parseInt(_0xefe640(0x21d))/0x5+parseInt(_0xefe640(0x1f8))/0x6*(-parseInt(_0xefe640(0x1fc))/0x7)+parseInt(_0xefe640(0x212))/0x8+parseInt(_0xefe640(0x236))/0x9;if(_0x19bfe6===_0x562e42)break;else _0x3930cb['push'](_0x3930cb['shift']());}catch(_0x55cc36){_0x3930cb['push'](_0x3930cb['shift']());}}}(a481_0x1afb,0x81e6c));function e(_0x1b9a2c){const _0x3cb2be=a481_0x9014,_0x13a835={'WfGCY':function(_0x4c5c6d,_0x47c58b){return _0x4c5c6d===_0x47c58b;},'Ytwbi':_0x3cb2be(0x224)};_0x13a835['WfGCY'](_0x13a835['Ytwbi'],globalThis?.['process']?.[_0x3cb2be(0x22e)][_0x3cb2be(0x240)])&&console['debug'](_0x1b9a2c);}class RetryTask{['id']=Math[a481_0x1bf31e(0x217)]()[a481_0x1bf31e(0x21c)](0x24)[a481_0x1bf31e(0x22c)](0x2);['fn'];[a481_0x1bf31e(0x20f)];['timestamp']=Date[a481_0x1bf31e(0x23c)]();[a481_0x1bf31e(0x21f)]=this[a481_0x1bf31e(0x23d)];[a481_0x1bf31e(0x22d)];[a481_0x1bf31e(0x233)];[a481_0x1bf31e(0x20a)];constructor(_0x26c611,_0x4c69c6,_0x56005f,_0x545dac,_0x526b7b){const _0x15bc5f=a481_0x1bf31e;this['fn']=_0x26c611,this['error']=_0x4c69c6,this[_0x15bc5f(0x23d)]=Date['now'](),this[_0x15bc5f(0x21f)]=Date['now'](),this['resolve']=_0x56005f,this['reject']=_0x545dac,this['signal']=_0x526b7b;}get[a481_0x1bf31e(0x229)](){const _0x2517cd=a481_0x1bf31e,_0x5d1a92={'lBQot':function(_0x441c41,_0x317743){return _0x441c41-_0x317743;}};return _0x5d1a92[_0x2517cd(0x210)](Date[_0x2517cd(0x23c)](),this[_0x2517cd(0x23d)]);}}function a481_0x9014(_0x144fbd,_0x50c99f){const _0x1afb5a=a481_0x1afb();return a481_0x9014=function(_0x90145f,_0x101909){_0x90145f=_0x90145f-0x1f3;let _0x46aec5=_0x1afb5a[_0x90145f];return _0x46aec5;},a481_0x9014(_0x144fbd,_0x50c99f);}class Retrier{#e=[];#t=[];#r=0x0;#i;#s;#n;#o;#c;constructor(_0x3dcb9d,{timeout:_0x583993=0xea60,maxDelay:_0x180bd8=0x64,concurrency:_0x1ffca2=0x3e8}={}){const _0x5516b7=a481_0x1bf31e,_0x281fbb={'VKCSt':function(_0x2e883e,_0x31669e){return _0x2e883e!=_0x31669e;},'HGVRT':_0x5516b7(0x22a),'bjPRl':_0x5516b7(0x219)};if(_0x281fbb['VKCSt'](_0x281fbb[_0x5516b7(0x20e)],typeof _0x3dcb9d))throw new Error(_0x281fbb['bjPRl']);this.#o=_0x3dcb9d,this.#i=_0x583993,this.#s=_0x180bd8,this.#c=_0x1ffca2;}get[a481_0x1bf31e(0x225)](){return this.#e['length'];}get['pending'](){const _0x48dafd=a481_0x1bf31e;return this.#t[_0x48dafd(0x23a)];}get[a481_0x1bf31e(0x207)](){return this.#r;}#a(_0x22ab5c,{signal:_0x38cea1,promise:_0x2f322b,resolve:_0x5eba53,reject:_0x511a3a}){const _0x5e3b08=a481_0x1bf31e,_0x121012={'ZROfA':function(_0x2ebbff,_0x1ac47c){return _0x2ebbff(_0x1ac47c);},'XYaer':_0x5e3b08(0x206),'QLPdK':function(_0x45a45c,_0x3c5c77){return _0x45a45c(_0x3c5c77);},'iupnH':'abort','SxPaL':function(_0x32d950){return _0x32d950();},'QOwZk':function(_0x4a7b1a,_0x43c4c0){return _0x4a7b1a(_0x43c4c0);},'ArVvc':function(_0x23da63,_0x337d69){return _0x23da63==_0x337d69;},'ZMiQw':function(_0xc00206,_0x2cd4cd){return _0xc00206(_0x2cd4cd);},'Iprrb':_0x5e3b08(0x237)};let _0x359df1;try{_0x359df1=_0x121012[_0x5e3b08(0x222)](_0x22ab5c);}catch(_0x424b8b){return _0x121012[_0x5e3b08(0x238)](_0x511a3a,new Error(_0x5e3b08(0x202)+_0x424b8b[_0x5e3b08(0x226)],{'cause':_0x424b8b})),_0x2f322b;}return _0x359df1&&_0x121012[_0x5e3b08(0x1f5)]('function',typeof _0x359df1['then'])?(this.#r++,_0x2f322b[_0x5e3b08(0x23f)](()=>{this.#r--,this.#h();})[_0x5e3b08(0x243)](()=>{}),Promise['resolve'](_0x359df1)[_0x5e3b08(0x230)](_0x121ae8=>{const _0x207e01=_0x5e3b08;_0x121012[_0x207e01(0x242)](e,_0x121012[_0x207e01(0x23e)]),_0x121012[_0x207e01(0x221)](_0x5eba53,_0x121ae8);})[_0x5e3b08(0x243)](_0x227cd5=>{const _0xdf7eec=_0x5e3b08;if(!this.#o(_0x227cd5))return void _0x121012[_0xdf7eec(0x221)](_0x511a3a,_0x227cd5);const _0x3f550c=new RetryTask(_0x22ab5c,_0x227cd5,_0x5eba53,_0x511a3a,_0x38cea1);_0x121012[_0xdf7eec(0x242)](e,_0xdf7eec(0x1fb)+_0x3f550c['id']+'.'),this.#e[_0xdf7eec(0x20b)](_0x3f550c),_0x38cea1?.[_0xdf7eec(0x228)](_0x121012[_0xdf7eec(0x1fa)],()=>{const _0x3fe0e5=_0xdf7eec;e(_0x3fe0e5(0x214)+_0x3f550c['id']+_0x3fe0e5(0x232)),_0x511a3a(_0x38cea1[_0x3fe0e5(0x209)]);}),this.#g();}),_0x2f322b):(_0x121012[_0x5e3b08(0x203)](_0x511a3a,new Error(_0x121012[_0x5e3b08(0x231)])),_0x2f322b);}[a481_0x1bf31e(0x1fe)](_0x34bfdf,{signal:_0x32de52}={}){const _0x3bce0b=a481_0x1bf31e,_0x39ad91={'vLsmu':function(_0x591e5b,_0x4712de){return _0x591e5b===_0x4712de;},'UsoGX':_0x3bce0b(0x204)};_0x32de52?.[_0x3bce0b(0x23b)]();const {promise:_0x12eb3e,resolve:_0x27cd62,reject:_0x45381f}=(function(){const _0x536c02=_0x3bce0b;if(Promise[_0x536c02(0x208)])return Promise[_0x536c02(0x208)]();let _0x4a18c2,_0x1d660b;const _0x2eb626=new Promise((_0x209e1a,_0x2aae94)=>{_0x4a18c2=_0x209e1a,_0x1d660b=_0x2aae94;});if(_0x39ad91[_0x536c02(0x1f7)](void 0x0,_0x4a18c2)||_0x39ad91[_0x536c02(0x1f7)](void 0x0,_0x1d660b))throw new Error(_0x39ad91['UsoGX']);return{'promise':_0x2eb626,'resolve':_0x4a18c2,'reject':_0x1d660b};}());return this.#t[_0x3bce0b(0x20b)](()=>this.#a(_0x34bfdf,{'signal':_0x32de52,'promise':_0x12eb3e,'resolve':_0x27cd62,'reject':_0x45381f})),this.#h(),_0x12eb3e;}#u(){const _0x27d768=a481_0x1bf31e;this[_0x27d768(0x218)]&&this.#h(),this[_0x27d768(0x225)]&&this.#g();}#h(){const _0x4915d1=a481_0x1bf31e,_0x51ec4e={'xFfdK':function(_0x1142da,_0x33b704){return _0x1142da(_0x33b704);},'ieNJd':function(_0x2503e6,_0x3d89a9){return _0x2503e6-_0x3d89a9;},'GTdKu':function(_0x255083,_0x535a97){return _0x255083<=_0x535a97;},'QtXGq':function(_0x122c79){return _0x122c79();}};_0x51ec4e[_0x4915d1(0x1fd)](e,_0x4915d1(0x1f3)+this[_0x4915d1(0x218)]+_0x4915d1(0x201)+this[_0x4915d1(0x207)]+_0x4915d1(0x21b));const _0x59f0e6=_0x51ec4e[_0x4915d1(0x223)](this.#c,this[_0x4915d1(0x207)]);if(_0x51ec4e[_0x4915d1(0x244)](_0x59f0e6,0x0))return;const _0x4e6e7d=Math[_0x4915d1(0x220)](this['pending'],_0x59f0e6);for(let _0x167d73=0x0;_0x167d73<_0x4e6e7d;_0x167d73++){const _0x5d911d=this.#t[_0x4915d1(0x20c)]();_0x51ec4e[_0x4915d1(0x227)](_0x5d911d);}_0x51ec4e[_0x4915d1(0x1fd)](e,_0x4915d1(0x211)+this[_0x4915d1(0x218)]+'\x20pending,\x20'+this['working']+'\x20working.');}#g(){const _0x23b06d=a481_0x1bf31e,_0x5835b5={'Leoem':function(_0x59fd3e,_0x2870b7,_0x426a40){return _0x59fd3e(_0x2870b7,_0x426a40);},'QsAyj':function(_0x4d02db,_0x4c1446){return _0x4d02db>_0x4c1446;},'uhwmJ':function(_0x2cd19c,_0x77acf0){return _0x2cd19c-_0x77acf0;},'uRLhA':function(_0x577e15,_0x4e3d7b){return _0x577e15>=_0x4e3d7b;},'Kqkem':function(_0xbd2d8,_0x539ea2){return _0xbd2d8(_0x539ea2);},'PvnaE':function(_0x2d97ff,_0x31bbe6){return _0x2d97ff(_0x31bbe6);},'qzyZq':function(_0x369c6d,_0x2b5ea4){return _0x369c6d(_0x2b5ea4);},'VKGzy':function(_0x481087,_0x51f7a0){return _0x481087(_0x51f7a0);},'GEwub':function(_0x1ba4c7){return _0x1ba4c7();}};_0x5835b5[_0x23b06d(0x1f4)](clearTimeout,this.#n),this.#n=void 0x0,_0x5835b5[_0x23b06d(0x1f4)](e,_0x23b06d(0x215)+this[_0x23b06d(0x225)]+_0x23b06d(0x241)+this[_0x23b06d(0x207)]+_0x23b06d(0x21b));const _0x4114fc=()=>{this.#n=_0x5835b5['Leoem'](setTimeout,()=>this.#u(),0x0);},_0x2b93a0=this.#e['shift']();return _0x2b93a0?function(_0x30cbfa,_0x4e99b9){const _0x4f74b3=_0x23b06d;return _0x5835b5[_0x4f74b3(0x1ff)](_0x30cbfa[_0x4f74b3(0x229)],_0x4e99b9);}(_0x2b93a0,this.#i)?(_0x5835b5[_0x23b06d(0x1f4)](e,_0x23b06d(0x214)+_0x2b93a0['id']+_0x23b06d(0x22f)),_0x2b93a0[_0x23b06d(0x233)](_0x2b93a0[_0x23b06d(0x20f)]),void _0x4114fc()):function(_0x2f2fd2,_0x599dbb){const _0x12491f=_0x23b06d,_0x109da2=Date[_0x12491f(0x23c)]()-_0x2f2fd2[_0x12491f(0x21f)],_0x592dfa=Math[_0x12491f(0x213)](_0x5835b5[_0x12491f(0x1f9)](_0x2f2fd2[_0x12491f(0x21f)],_0x2f2fd2[_0x12491f(0x23d)]),0x1);return _0x5835b5[_0x12491f(0x20d)](_0x109da2,Math[_0x12491f(0x220)](1.2*_0x592dfa,_0x599dbb));}(_0x2b93a0,this.#s)?(_0x2b93a0[_0x23b06d(0x21f)]=Date[_0x23b06d(0x23c)](),void Promise['resolve'](_0x2b93a0['fn']())[_0x23b06d(0x230)](_0x37640a=>{const _0x379e4d=_0x23b06d;e(_0x379e4d(0x214)+_0x2b93a0['id']+_0x379e4d(0x216)+_0x2b93a0[_0x379e4d(0x229)]+'ms.'),_0x2b93a0[_0x379e4d(0x22d)](_0x37640a);})[_0x23b06d(0x243)](_0x1b0628=>{const _0x5684d9=_0x23b06d;if(!this.#o(_0x1b0628))return _0x5835b5[_0x5684d9(0x245)](e,'Task\x20'+_0x2b93a0['id']+_0x5684d9(0x22b)+_0x1b0628[_0x5684d9(0x226)]+'.'),void _0x2b93a0[_0x5684d9(0x233)](_0x1b0628);_0x2b93a0[_0x5684d9(0x21f)]=Date[_0x5684d9(0x23c)](),this.#e[_0x5684d9(0x20b)](_0x2b93a0),e('Task\x20'+_0x2b93a0['id']+_0x5684d9(0x200));})[_0x23b06d(0x23f)](()=>{this.#u();})):(_0x5835b5['qzyZq'](e,_0x23b06d(0x214)+_0x2b93a0['id']+_0x23b06d(0x21e)),this.#e['push'](_0x2b93a0),void _0x4114fc()):(_0x5835b5[_0x23b06d(0x21a)](e,'Queue\x20is\x20empty,\x20exiting.'),void(this[_0x23b06d(0x218)]&&_0x5835b5[_0x23b06d(0x1f6)](_0x4114fc)));}}export{Retrier};