function a435_0x1ee9(){const _0x109428=['rename','88760eluQhc','loaded','DELETE_DIR','onmessage','6CIAITo','listDir','lavrj','DvATZ','unmount','GVtkO','WrDXP','910568eOsHsr','terminate','deleteFile','reject','CREATE_DIR','hLDzK','FFPROBE','createDir','mount','AbortError','EXEC','push','filter','HXHof','module','RENAME','progress','forEach','mqjwD','UNMOUNT','\x20was\x20aborted','binary','exec','11095506FKBdeh','qRCxR','zAyQQ','url','22IMAnFA','keys','LOG','160dOGHJg','log','Message\x20#\x20','buffer','postMessage','abort','MOUNT','off','ERROR','3581682GyzNIL','DELETE_FILE','6032980ptzJGt','LIST_DIR','READ_FILE','PROGRESS','8132590ENrFOz','4vdPLuf','4134136VFEgTv','uCLOn','WRITE_FILE','writeFile'];a435_0x1ee9=function(){return _0x109428;};return a435_0x1ee9();}function a435_0x1846(_0x1c287a,_0x2481de){const _0x1ee96b=a435_0x1ee9();return a435_0x1846=function(_0x1846f8,_0x4e5db5){_0x1846f8=_0x1846f8-0x1b9;let _0x410aef=_0x1ee96b[_0x1846f8];return _0x410aef;},a435_0x1846(_0x1c287a,_0x2481de);}const a435_0x2b7dc7=a435_0x1846;(function(_0x13037d,_0x5ab9ed){const _0x8e015a=a435_0x1846,_0x5d7f20=_0x13037d();while(!![]){try{const _0x4e054e=parseInt(_0x8e015a(0x1e1))/0x1*(parseInt(_0x8e015a(0x1d0))/0x2)+parseInt(_0x8e015a(0x1c9))/0x3+-parseInt(_0x8e015a(0x1d1))/0x4+parseInt(_0x8e015a(0x1cf))/0x5*(parseInt(_0x8e015a(0x1da))/0x6)+-parseInt(_0x8e015a(0x1d6))/0x7*(parseInt(_0x8e015a(0x1c0))/0x8)+-parseInt(_0x8e015a(0x1b9))/0x9+parseInt(_0x8e015a(0x1cb))/0xa*(-parseInt(_0x8e015a(0x1bd))/0xb);if(_0x4e054e===_0x5ab9ed)break;else _0x5d7f20['push'](_0x5d7f20['shift']());}catch(_0x58f04e){_0x5d7f20['push'](_0x5d7f20['shift']());}}}(a435_0x1ee9,0xdf628));import{FFMessageType}from'./const.js';import{getMessageID}from'./utils.js';import{ERROR_TERMINATED,ERROR_NOT_LOADED}from'./errors.js';export class FFmpeg{#worker=null;#resolves={};#rejects={};#logEventCallbacks=[];#progressEventCallbacks=[];[a435_0x2b7dc7(0x1d7)]=![];#registerHandlers=()=>{const _0xb74ec2=a435_0x2b7dc7;this.#worker&&(this.#worker[_0xb74ec2(0x1d9)]=({data:{id:_0x198142,type:_0x457eb3,data:_0x2e756e}})=>{const _0x532df3=_0xb74ec2;switch(_0x457eb3){case FFMessageType['LOAD']:this[_0x532df3(0x1d7)]=!![],this.#resolves[_0x198142](_0x2e756e);break;case FFMessageType[_0x532df3(0x1c6)]:case FFMessageType[_0x532df3(0x1f4)]:case FFMessageType[_0x532df3(0x1eb)]:case FFMessageType[_0x532df3(0x1e7)]:case FFMessageType[_0x532df3(0x1d3)]:case FFMessageType['READ_FILE']:case FFMessageType[_0x532df3(0x1ca)]:case FFMessageType[_0x532df3(0x1f0)]:case FFMessageType[_0x532df3(0x1e5)]:case FFMessageType[_0x532df3(0x1cc)]:case FFMessageType[_0x532df3(0x1d8)]:this.#resolves[_0x198142](_0x2e756e);break;case FFMessageType[_0x532df3(0x1bf)]:this.#logEventCallbacks[_0x532df3(0x1f2)](_0x16969b=>_0x16969b(_0x2e756e));break;case FFMessageType[_0x532df3(0x1ce)]:this.#progressEventCallbacks[_0x532df3(0x1f2)](_0x26fa48=>_0x26fa48(_0x2e756e));break;case FFMessageType[_0x532df3(0x1c8)]:this.#rejects[_0x198142](_0x2e756e);break;}delete this.#resolves[_0x198142],delete this.#rejects[_0x198142];});};#send=({type:_0x3e53ad,data:_0x31f407},_0x46ca13=[],_0x149a5a)=>{const _0x3093d2=a435_0x2b7dc7,_0x15c3be={'OBUWO':function(_0x4d9f68,_0x4b4ded){return _0x4d9f68(_0x4b4ded);},'HXHof':_0x3093d2(0x1c5)};if(!this.#worker)return Promise[_0x3093d2(0x1e4)](ERROR_NOT_LOADED);return new Promise((_0x527d0e,_0x3e65df)=>{const _0x42bba0=_0x3093d2,_0x590844={'GVtkO':function(_0x374298,_0x7c8390){return _0x15c3be['OBUWO'](_0x374298,_0x7c8390);},'mqjwD':_0x42bba0(0x1ea)},_0x26b663=getMessageID();this.#worker&&this.#worker[_0x42bba0(0x1c4)]({'id':_0x26b663,'type':_0x3e53ad,'data':_0x31f407},_0x46ca13),this.#resolves[_0x26b663]=_0x527d0e,this.#rejects[_0x26b663]=_0x3e65df,_0x149a5a?.['addEventListener'](_0x15c3be[_0x42bba0(0x1ee)],()=>{const _0x304120=_0x42bba0;_0x590844[_0x304120(0x1df)](_0x3e65df,new DOMException(_0x304120(0x1c2)+_0x26b663+_0x304120(0x1f5),_0x590844[_0x304120(0x1f3)]));},{'once':!![]});});};['on'](_0x440514,_0x423794){const _0x337ef1=a435_0x2b7dc7,_0x37961f={'hLDzK':function(_0xa1cf3a,_0x5d4798){return _0xa1cf3a===_0x5d4798;},'DvATZ':_0x337ef1(0x1c1)};if(_0x37961f[_0x337ef1(0x1e6)](_0x440514,_0x37961f[_0x337ef1(0x1dd)]))this.#logEventCallbacks['push'](_0x423794);else _0x37961f[_0x337ef1(0x1e6)](_0x440514,_0x337ef1(0x1f1))&&this.#progressEventCallbacks[_0x337ef1(0x1ec)](_0x423794);}[a435_0x2b7dc7(0x1c7)](_0x2f87a1,_0x40774e){const _0x58b2d6=a435_0x2b7dc7,_0x456029={'zAyQQ':function(_0x414104,_0xaee623){return _0x414104===_0xaee623;},'uCLOn':_0x58b2d6(0x1c1)};if(_0x456029[_0x58b2d6(0x1bb)](_0x2f87a1,_0x456029[_0x58b2d6(0x1d2)]))this.#logEventCallbacks=this.#logEventCallbacks[_0x58b2d6(0x1ed)](_0x586a83=>_0x586a83!==_0x40774e);else _0x2f87a1===_0x58b2d6(0x1f1)&&(this.#progressEventCallbacks=this.#progressEventCallbacks['filter'](_0x1c4b85=>_0x1c4b85!==_0x40774e));}['load']=({classWorkerURL:_0x1cf5d4,..._0x3e0125}={},{signal:_0x20119a}={})=>{const _0x2f3545=a435_0x2b7dc7,_0x1299c4={'lavrj':_0x2f3545(0x1ef),'WrDXP':'./worker.js'};return!this.#worker&&(this.#worker=_0x1cf5d4?new Worker(new URL(_0x1cf5d4,import.meta[_0x2f3545(0x1bc)]),{'type':_0x1299c4[_0x2f3545(0x1dc)]}):new Worker(new URL(_0x1299c4[_0x2f3545(0x1e0)],import.meta['url']),{'type':_0x1299c4['lavrj']}),this.#registerHandlers()),this.#send({'type':FFMessageType['LOAD'],'data':_0x3e0125},undefined,_0x20119a);};[a435_0x2b7dc7(0x1f7)]=(_0x5ec661,_0x140a84=-0x1,{signal:_0x26eb23}={})=>this.#send({'type':FFMessageType[a435_0x2b7dc7(0x1eb)],'data':{'args':_0x5ec661,'timeout':_0x140a84}},undefined,_0x26eb23);['ffprobe']=(_0x214772,_0x31be53=-0x1,{signal:_0x40a08e}={})=>this.#send({'type':FFMessageType[a435_0x2b7dc7(0x1e7)],'data':{'args':_0x214772,'timeout':_0x31be53}},undefined,_0x40a08e);[a435_0x2b7dc7(0x1e2)]=()=>{const _0x4b18ed=a435_0x2b7dc7,_0x4ed17c=Object[_0x4b18ed(0x1be)](this.#rejects);for(const _0x349877 of _0x4ed17c){this.#rejects[_0x349877](ERROR_TERMINATED),delete this.#rejects[_0x349877],delete this.#resolves[_0x349877];}this.#worker&&(this.#worker['terminate'](),this.#worker=null,this['loaded']=![]);};[a435_0x2b7dc7(0x1d4)]=(_0x3ee937,_0x1de863,{signal:_0x3dba31}={})=>{const _0x3be034=a435_0x2b7dc7,_0x5bcfed={'qRCxR':function(_0x1b9021,_0x3b121b){return _0x1b9021 instanceof _0x3b121b;}},_0x2a480a=[];return _0x5bcfed[_0x3be034(0x1ba)](_0x1de863,Uint8Array)&&_0x2a480a[_0x3be034(0x1ec)](_0x1de863[_0x3be034(0x1c3)]),this.#send({'type':FFMessageType[_0x3be034(0x1d3)],'data':{'path':_0x3ee937,'data':_0x1de863}},_0x2a480a,_0x3dba31);};[a435_0x2b7dc7(0x1e9)]=(_0x3526c7,_0xd07dc8,_0x59cd4c)=>{const _0xe913ab=[];return this.#send({'type':FFMessageType['MOUNT'],'data':{'fsType':_0x3526c7,'options':_0xd07dc8,'mountPoint':_0x59cd4c}},_0xe913ab);};[a435_0x2b7dc7(0x1de)]=_0x4273a6=>{const _0x4d6002=a435_0x2b7dc7,_0x2c5948=[];return this.#send({'type':FFMessageType[_0x4d6002(0x1f4)],'data':{'mountPoint':_0x4273a6}},_0x2c5948);};['readFile']=(_0x2fdbb5,_0x343c40=a435_0x2b7dc7(0x1f6),{signal:_0x23eeb8}={})=>this.#send({'type':FFMessageType[a435_0x2b7dc7(0x1cd)],'data':{'path':_0x2fdbb5,'encoding':_0x343c40}},undefined,_0x23eeb8);[a435_0x2b7dc7(0x1e3)]=(_0x112d1e,{signal:_0x5cb057}={})=>this.#send({'type':FFMessageType['DELETE_FILE'],'data':{'path':_0x112d1e}},undefined,_0x5cb057);[a435_0x2b7dc7(0x1d5)]=(_0x20b5e3,_0x1d5333,{signal:_0x430e1a}={})=>this.#send({'type':FFMessageType['RENAME'],'data':{'oldPath':_0x20b5e3,'newPath':_0x1d5333}},undefined,_0x430e1a);[a435_0x2b7dc7(0x1e8)]=(_0x567df4,{signal:_0x156c44}={})=>this.#send({'type':FFMessageType[a435_0x2b7dc7(0x1e5)],'data':{'path':_0x567df4}},undefined,_0x156c44);[a435_0x2b7dc7(0x1db)]=(_0x95186c,{signal:_0x303576}={})=>this.#send({'type':FFMessageType['LIST_DIR'],'data':{'path':_0x95186c}},undefined,_0x303576);['deleteDir']=(_0x36f601,{signal:_0x18aba4}={})=>this.#send({'type':FFMessageType[a435_0x2b7dc7(0x1d8)],'data':{'path':_0x36f601}},undefined,_0x18aba4);}