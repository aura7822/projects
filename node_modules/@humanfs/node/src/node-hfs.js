const a477_0x4378fd=a477_0x25fe;(function(_0x1b9805,_0x34547c){const _0x27bffc=a477_0x25fe,_0x94f399=_0x1b9805();while(!![]){try{const _0x32ada5=parseInt(_0x27bffc(0xe0))/0x1*(-parseInt(_0x27bffc(0xed))/0x2)+parseInt(_0x27bffc(0xf1))/0x3+parseInt(_0x27bffc(0xf2))/0x4+-parseInt(_0x27bffc(0x106))/0x5*(-parseInt(_0x27bffc(0x10d))/0x6)+parseInt(_0x27bffc(0xe3))/0x7+-parseInt(_0x27bffc(0xe5))/0x8*(parseInt(_0x27bffc(0xef))/0x9)+parseInt(_0x27bffc(0x114))/0xa;if(_0x32ada5===_0x34547c)break;else _0x94f399['push'](_0x94f399['shift']());}catch(_0x4e70a6){_0x94f399['push'](_0x94f399['shift']());}}}(a477_0x4ea4,0x49836));import{Hfs}from'@humanfs/core';import a477_0x81c4ed from'node:path';import{Retrier}from'@humanwhocodes/retry';import a477_0x571520 from'node:fs/promises';import{fileURLToPath}from'node:url';function a477_0x25fe(_0x5da307,_0x2f631c){const _0x4ea452=a477_0x4ea4();return a477_0x25fe=function(_0x25fee0,_0x13caa2){_0x25fee0=_0x25fee0-0xdb;let _0x19268c=_0x4ea452[_0x25fee0];return _0x19268c;},a477_0x25fe(_0x5da307,_0x2f631c);}const RETRY_ERROR_CODES=new Set(['ENFILE',a477_0x4378fd(0xe4)]);function a477_0x4ea4(){const _0x203796=['appendFile','name','isDirectory','catch','UnNKv','ClEYB','fMGEs','code','readFile','ERR_FS_EISDIR','tXzAm','rmdir','isSymlink','isFile','bytes','30hVnMWz','writeFile','deleteAll','\x27\x20->\x20\x27','stat','rename','NAXpZ','114966LsuHOS','isSymbolicLink','zZzro','EISDIR:\x20illegal\x20operation\x20on\x20a\x20directory,\x20move\x20\x27','buffer','copy','ENOENT','229460JwXszg','lastModified','from','retry','list','readdir','delete','append','133LlsJHQ','size','join','899619eazdOI','EMFILE','571048jZOzEj','copyAll','mtime','createDirectory','write','mkdir','GBMqe','YTLJw','958wpqgoR','nCyoa','63VkizVu','copyFile','1113192piYbwI','907964OZguIo','dirname','iRuJn','then','mJCpL'];a477_0x4ea4=function(){return _0x203796;};return a477_0x4ea4();}class NodeHfsDirectoryEntry{[a477_0x4378fd(0xf8)];[a477_0x4378fd(0x104)];[a477_0x4378fd(0xf9)];[a477_0x4378fd(0x103)];constructor(_0x239da0){const _0x2d5aad=a477_0x4378fd;this[_0x2d5aad(0xf8)]=_0x239da0[_0x2d5aad(0xf8)],this[_0x2d5aad(0x104)]=_0x239da0['isFile'](),this['isDirectory']=_0x239da0[_0x2d5aad(0xf9)](),this[_0x2d5aad(0x103)]=_0x239da0[_0x2d5aad(0x10e)]();}}export class NodeHfsImpl{#fsp;#retrier;constructor({fsp:fsp=a477_0x571520}={}){const _0x343306=a477_0x4378fd;this.#fsp=fsp,this.#retrier=new Retrier(_0x10e87b=>RETRY_ERROR_CODES['has'](_0x10e87b[_0x343306(0xfe)]));}[a477_0x4378fd(0x105)](_0x45ba47){const _0x4fdee4=a477_0x4378fd,_0x4f2f06={'VjtGu':function(_0x146795,_0x558251){return _0x146795===_0x558251;}};return this.#retrier[_0x4fdee4(0xdb)](()=>this.#fsp[_0x4fdee4(0xff)](_0x45ba47))['then'](_0x2a305b=>new Uint8Array(_0x2a305b[_0x4fdee4(0x111)]))[_0x4fdee4(0xfa)](_0x2858f2=>{const _0x345a6b=_0x4fdee4;if(_0x4f2f06['VjtGu'](_0x2858f2['code'],_0x345a6b(0x113)))return undefined;throw _0x2858f2;});}async[a477_0x4378fd(0xe9)](_0x4e042d,_0x4d2ee2){const _0x52a417=a477_0x4378fd,_0x40ddae={'GBMqe':_0x52a417(0x113),'mJCpL':function(_0x4dca80,_0x2e7fa6){return _0x4dca80(_0x2e7fa6);}},_0x412e17=Buffer[_0x52a417(0x116)](_0x4d2ee2);return this.#retrier[_0x52a417(0xdb)](()=>this.#fsp['writeFile'](_0x4e042d,_0x412e17))[_0x52a417(0xfa)](_0xa24611=>{const _0x50cc8e=_0x52a417;if(_0xa24611[_0x50cc8e(0xfe)]===_0x40ddae[_0x50cc8e(0xeb)]){const _0x5b9ca5=a477_0x81c4ed['dirname'](_0x4e042d instanceof URL?_0x40ddae[_0x50cc8e(0xf6)](fileURLToPath,_0x4e042d):_0x4e042d);return this.#fsp[_0x50cc8e(0xea)](_0x5b9ca5,{'recursive':!![]})[_0x50cc8e(0xf5)](()=>this.#fsp[_0x50cc8e(0x107)](_0x4e042d,_0x412e17));}throw _0xa24611;});}async[a477_0x4378fd(0xdf)](_0x11cf17,_0x3c298f){const _0x162f9=a477_0x4378fd,_0x4bbedb={'ClEYB':_0x162f9(0x113),'iRuJn':function(_0x5ccfd7,_0x130276){return _0x5ccfd7 instanceof _0x130276;},'UnNKv':function(_0x28d425,_0x253f70){return _0x28d425(_0x253f70);}},_0x1c2034=Buffer[_0x162f9(0x116)](_0x3c298f);return this.#retrier['retry'](()=>this.#fsp['appendFile'](_0x11cf17,_0x1c2034))[_0x162f9(0xfa)](_0x48ec45=>{const _0x3dca6d=_0x162f9;if(_0x48ec45[_0x3dca6d(0xfe)]===_0x4bbedb[_0x3dca6d(0xfc)]){const _0x740724=a477_0x81c4ed[_0x3dca6d(0xf3)](_0x4bbedb[_0x3dca6d(0xf4)](_0x11cf17,URL)?_0x4bbedb[_0x3dca6d(0xfb)](fileURLToPath,_0x11cf17):_0x11cf17);return this.#fsp[_0x3dca6d(0xea)](_0x740724,{'recursive':!![]})[_0x3dca6d(0xf5)](()=>this.#fsp[_0x3dca6d(0xf7)](_0x11cf17,_0x1c2034));}throw _0x48ec45;});}['isFile'](_0x16f4d7){const _0x51b53a=a477_0x4378fd,_0x26377b={'DLiFu':function(_0x10546b,_0x5bbaa9){return _0x10546b===_0x5bbaa9;},'YTLJw':_0x51b53a(0x113)};return this.#fsp[_0x51b53a(0x10a)](_0x16f4d7)[_0x51b53a(0xf5)](_0x110309=>_0x110309['isFile']())[_0x51b53a(0xfa)](_0x3524f5=>{const _0xc52ad7=_0x51b53a;if(_0x26377b['DLiFu'](_0x3524f5['code'],_0x26377b[_0xc52ad7(0xec)]))return![];throw _0x3524f5;});}[a477_0x4378fd(0xf9)](_0x964481){const _0x4ee85b=a477_0x4378fd,_0x4db19d={'PEZYu':function(_0x30e1d8,_0x21710f){return _0x30e1d8===_0x21710f;}};return this.#fsp[_0x4ee85b(0x10a)](_0x964481)['then'](_0x58426a=>_0x58426a[_0x4ee85b(0xf9)]())[_0x4ee85b(0xfa)](_0x264db6=>{const _0x49f2b0=_0x4ee85b;if(_0x4db19d['PEZYu'](_0x264db6[_0x49f2b0(0xfe)],_0x49f2b0(0x113)))return![];throw _0x264db6;});}async[a477_0x4378fd(0xe8)](_0x5f23a0){const _0x3faf8f=a477_0x4378fd;await this.#fsp[_0x3faf8f(0xea)](_0x5f23a0,{'recursive':!![]});}[a477_0x4378fd(0xde)](_0x546f29){const _0x43729d=a477_0x4378fd,_0x443c25={'dOxrR':function(_0x58644b,_0x5bcbdb){return _0x58644b===_0x5bcbdb;}};return this.#fsp['rm'](_0x546f29)[_0x43729d(0xf5)](()=>!![])['catch'](_0x15535b=>{const _0x132a4a=_0x43729d;if(_0x15535b['code']===_0x132a4a(0x100))return this.#fsp[_0x132a4a(0x102)](_0x546f29)[_0x132a4a(0xf5)](()=>!![]);if(_0x443c25['dOxrR'](_0x15535b[_0x132a4a(0xfe)],_0x132a4a(0x113)))return![];throw _0x15535b;});}[a477_0x4378fd(0x108)](_0x37ede7){const _0x37ccac=a477_0x4378fd,_0x29a0e1={'NAXpZ':function(_0x35124a,_0x170a4f){return _0x35124a===_0x170a4f;}};return this.#fsp['rm'](_0x37ede7,{'recursive':!![]})[_0x37ccac(0xf5)](()=>!![])['catch'](_0x36dc7d=>{const _0x10546e=_0x37ccac;if(_0x29a0e1[_0x10546e(0x10c)](_0x36dc7d[_0x10546e(0xfe)],_0x10546e(0x113)))return![];throw _0x36dc7d;});}async*['list'](_0xba5f13){const _0x1c0bad=a477_0x4378fd,_0x1a2aed=await this.#fsp[_0x1c0bad(0xdd)](_0xba5f13,{'withFileTypes':!![]});for(const _0x2e0e15 of _0x1a2aed){yield new NodeHfsDirectoryEntry(_0x2e0e15);}}[a477_0x4378fd(0xe1)](_0x4ec753){const _0x2647b4=a477_0x4378fd,_0x17f4a8={'nCyoa':function(_0x1d5962,_0x153a00){return _0x1d5962===_0x153a00;},'cDOFe':'ENOENT'};return this.#fsp[_0x2647b4(0x10a)](_0x4ec753)['then'](_0x5b6a60=>_0x5b6a60[_0x2647b4(0xe1)])[_0x2647b4(0xfa)](_0x423ad2=>{const _0x3fbe41=_0x2647b4;if(_0x17f4a8[_0x3fbe41(0xee)](_0x423ad2[_0x3fbe41(0xfe)],_0x17f4a8['cDOFe']))return undefined;throw _0x423ad2;});}[a477_0x4378fd(0x115)](_0x1b44cf){const _0x5620a6=a477_0x4378fd,_0x384ab6={'zZzro':_0x5620a6(0x113)};return this.#fsp[_0x5620a6(0x10a)](_0x1b44cf)['then'](_0x4d436f=>_0x4d436f[_0x5620a6(0xe7)])[_0x5620a6(0xfa)](_0x4e5e7a=>{const _0x36dc4e=_0x5620a6;if(_0x4e5e7a[_0x36dc4e(0xfe)]===_0x384ab6[_0x36dc4e(0x10f)])return undefined;throw _0x4e5e7a;});}[a477_0x4378fd(0x112)](_0x49b9b4,_0x23b12c){const _0x4c40a7=a477_0x4378fd;return this.#fsp[_0x4c40a7(0xf0)](_0x49b9b4,_0x23b12c);}async[a477_0x4378fd(0xe6)](_0x353962,_0xd73928){const _0x5910da=a477_0x4378fd,_0x32b662={'fMGEs':function(_0x15ab1e,_0x3727c5){return _0x15ab1e(_0x3727c5);},'SnUjQ':function(_0x5c541,_0x2792f2){return _0x5c541 instanceof _0x2792f2;},'tXzAm':function(_0x4f0ad2,_0x1beef1){return _0x4f0ad2(_0x1beef1);}};if(await this[_0x5910da(0x104)](_0x353962))return this[_0x5910da(0x112)](_0x353962,_0xd73928);const _0x21e137=_0x353962 instanceof URL?_0x32b662[_0x5910da(0xfd)](fileURLToPath,_0x353962):_0x353962,_0x15bcd3=_0x32b662['SnUjQ'](_0xd73928,URL)?_0x32b662[_0x5910da(0x101)](fileURLToPath,_0xd73928):_0xd73928;await this[_0x5910da(0xe8)](_0xd73928);for await(const _0xe21613 of this[_0x5910da(0xdc)](_0x353962)){const _0x1c0afb=a477_0x81c4ed['join'](_0x21e137,_0xe21613[_0x5910da(0xf8)]),_0x3524e4=a477_0x81c4ed[_0x5910da(0xe2)](_0x15bcd3,_0xe21613['name']);_0xe21613[_0x5910da(0xf9)]?await this['copyAll'](_0x1c0afb,_0x3524e4):await this[_0x5910da(0x112)](_0x1c0afb,_0x3524e4);}}['move'](_0x4ec2fc,_0x1a49d3){const _0x35bf49=a477_0x4378fd;return this.#fsp[_0x35bf49(0x10a)](_0x4ec2fc)[_0x35bf49(0xf5)](_0x322c3f=>{const _0x191bf8=_0x35bf49;if(_0x322c3f['isDirectory']())throw new Error(_0x191bf8(0x110)+_0x4ec2fc+_0x191bf8(0x109)+_0x1a49d3+'\x27');return this.#fsp[_0x191bf8(0x10b)](_0x4ec2fc,_0x1a49d3);});}async['moveAll'](_0x406ed0,_0x5240db){const _0x5a337e=a477_0x4378fd;return this.#fsp[_0x5a337e(0x10b)](_0x406ed0,_0x5240db);}}export class NodeHfs extends Hfs{constructor({fsp:_0x3b3cab}={}){super({'impl':new NodeHfsImpl({'fsp':_0x3b3cab})});}}export const hfs=new NodeHfs();